<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Lab · Scientific Programming in Julia</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://JuliaTeachingCTU.github.io/Scientific-Programming-in-Julia/lecture_03/lab/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.svg" alt="Scientific Programming in Julia logo"/><img class="docs-dark-only" src="../../assets/logo-dark.svg" alt="Scientific Programming in Julia logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Scientific Programming in Julia</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../installation/">Installation</a></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">1: Introduction</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_01/motivation/">Motivation</a></li><li><a class="tocitem" href="../../lecture_01/outline/">Outline</a></li><li><a class="tocitem" href="../../lecture_01/lab/">Lab</a></li><li><a class="tocitem" href="../../lecture_01/hw/">Homework</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">2: The power of Type System &amp; multiple dispatch</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_02/lecture/">Lecture</a></li><li><a class="tocitem" href="../../lecture_02/lab/">Lab</a></li><li><a class="tocitem" href="../../lecture_02/hw/">Homework</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox" checked/><label class="tocitem" for="menuitem-5"><span class="docs-label">3: Design patterns</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Lab</a><ul class="internal"><li><a class="tocitem" href="#Reproduction"><span>Reproduction</span></a></li><li><a class="tocitem" href="#One-step-at-a-time"><span>One step at a time</span></a></li><li><a class="tocitem" href="#Simulate-the-world!"><span>Simulate the world!</span></a></li><li><a class="tocitem" href="#Female-and-Male-Sheep"><span>Female &amp; Male Sheep</span></a></li></ul></li><li><a class="tocitem" href="../hw/">Homework</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">4: Packages development, environments, etc...</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_04/lab/">Lab</a></li></ul></li><li><span class="tocitem">5: Benchmarking, profiling, and performance gotchas</span></li><li><span class="tocitem">6: Language introspection</span></li><li><input class="collapse-toggle" id="menuitem-9" type="checkbox"/><label class="tocitem" for="menuitem-9"><span class="docs-label">7: Macros</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_07/macros/">Macros</a></li></ul></li><li><span class="tocitem">8: Introduction to automatic differentiation</span></li><li><span class="tocitem">9: Manipulating intermediate representation</span></li><li><span class="tocitem">10: Different levels of parallel programming</span></li><li><span class="tocitem">11: Julia for GPU programming</span></li><li><span class="tocitem">12: Uncertainty propagation in ODE</span></li><li><span class="tocitem">13: Learning ODE from data</span></li><li><a class="tocitem" href="../../how_to_submit_hw/">How to submit homeworks</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">3: Design patterns</a></li><li class="is-active"><a href>Lab</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Lab</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaTeachingCTU/Scientific-Programming-in-Julia/blob/master/docs/src/lecture_03/lab.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Lab-3:-Predator-Prey-Agents"><a class="docs-heading-anchor" href="#Lab-3:-Predator-Prey-Agents">Lab 3: Predator-Prey Agents</a><a id="Lab-3:-Predator-Prey-Agents-1"></a><a class="docs-heading-anchor-permalink" href="#Lab-3:-Predator-Prey-Agents" title="Permalink"></a></h1><p>In this lab we will finalize our predator-prey agent simulation such that we can simulate a number of steps and get a plot like below.</p><p><img src="../pred-prey.png" alt="img"/></p><h2 id="Reproduction"><a class="docs-heading-anchor" href="#Reproduction">Reproduction</a><a id="Reproduction-1"></a><a class="docs-heading-anchor-permalink" href="#Reproduction" title="Permalink"></a></h2><p>Currently our animals can only eat. In our simulation we also want them to reproduce. We will do this by adding a <code>reproduce!</code> method to <code>AbstractAnimal</code>.</p><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise</header>
<div class="admonition-body"><p>Write a function <code>reproduce!</code> that takes an <code>AbstractAnimal</code> and a <code>World</code>. Reproducing will cost an animal half of its energy and then add an identical copy of the given animal to the world.</p></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><pre><code class="language-julia hljs">function reproduce!(a::AbstractAnimal, w::World)
    energy!(a, energy(a)/2)
    push!(w.agents, deepcopy(a))
end</code></pre></p></details><h2 id="One-step-at-a-time"><a class="docs-heading-anchor" href="#One-step-at-a-time">One step at a time</a><a id="One-step-at-a-time-1"></a><a class="docs-heading-anchor-permalink" href="#One-step-at-a-time" title="Permalink"></a></h2><p>One iteration of our simulation will be carried out by a function called <code>agent_step!(::AbstractAgent, ::World)</code>. Implement one method for <code>AbstractPlant</code>s and one for <code>AbstractAnimal</code>s.</p><p>An <code>AbstractPlant</code> will grow if it is not fully grown (i.e. decrease growth counter).  If the growth counter has reached zero, the <code>fully_grown</code> flag has to be set to <code>true</code> and the counter reset to <code>regrowth_time</code>.</p><p>An <code>AbstractAnimal</code> will loose one unit of energy in every step.  Then it will try to find food and eat. After eating, if its energy is less than zero, the animal dies.  If it is still alive, it will try to reproduce with the probablitiy <span>$p_r$</span>.</p><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise</header>
<div class="admonition-body"><p>Implement the function <code>agent_step!</code> with specialized methods for <code>AbstractAnimal</code>s and <code>AbstractPlant</code>s.</p></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><pre><code class="language-julia hljs">function agent_step!(a::AbstractPlant, w::World)
    if !fully_grown(a)
        if countdown(a) &lt;= 0
            fully_grown!(a,true)
            reset!(a)
        else
            incr_countdown!(a,-1)
        end
    end
    return a
end

function agent_step!(a::AbstractAnimal, w::World)
    incr_energy!(a,-1)
    dinner = find_food(a,w)
    eat!(a, dinner, w)
    if energy(a) &lt; 0
        kill_agent!(a,w)
        return
    end
    if rand() &lt;= reproduction_prob(a)
        reproduce!(a,w)
    end
    return a
end</code></pre></p></details><h2 id="Simulate-the-world!"><a class="docs-heading-anchor" href="#Simulate-the-world!">Simulate the world!</a><a id="Simulate-the-world!-1"></a><a class="docs-heading-anchor-permalink" href="#Simulate-the-world!" title="Permalink"></a></h2><p>The last function we need for our simulation just needs to run a number of steps. In practice we often want varying logging behaviour which we can implement nicely using <em>callbacks</em>.</p><p>An exemplary callback could just log the agent count at every step:</p><pre><code class="language-julia hljs">log_count(w::World) = @info agent_count(w)</code></pre><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise</header>
<div class="admonition-body"><p>Implement a function <code>simulate!(w::World, iters::Int; callbacks=[])</code> which runs a number of iterations (i.e. <code>agent_step!</code>s) and applies passed callbacks of the form <code>callback(::World)</code> after each iteration.</p></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><pre><code class="language-julia hljs">function simulate!(w::World, iters::Int; callbacks=[])
    for i in 1:iters
        for a in w.agents
            agent_step!(a,w)
        end
        for cb in callbacks
            cb(w)
        end
    end
end</code></pre></p></details><p>Now lets try to run our first fully fledged simulation!  Below you can find some parameters that will often result in nice oscillations like in the plot at the beginning of the lab.</p><pre><code class="language-julia hljs">n_grass       = 500
regrowth_time = 17.0

n_sheep         = 100
Δenergy_sheep   = 5.0
sheep_reproduce = 0.5
sheep_foodprob  = 0.4

n_wolves       = 8
Δenergy_wolf   = 17.0
wolf_reproduce = 0.03
wolf_foodprob  = 0.02

gs = [Grass(true,regrowth_time,regrowth_time) for _ in 1:n_grass]
ss = [Sheep(2*Δenergy_sheep,Δenergy_sheep,sheep_reproduce, sheep_foodprob) for _ in 1:n_sheep]
ws = [Wolf(2*Δenergy_wolf,Δenergy_wolf,wolf_reproduce, wolf_foodprob) for _ in 1:n_wolves]

w = World(vcat(gs,ss,ws))

# construct a global variable to store agent counts at every step
counts = Dict(n=&gt;[c] for (n,c) in agent_count(w))
# callback to save current counts
function save_agent_count(w::World)
    for (n,c) in agent_count(w)
        push!(counts[n],c)
    end
end

cbs = [
    w-&gt;(@info agent_count(w)),
    save_agent_count
]

simulate!(w, 200, callbacks=cbs)

# plot the count trajectories for every type of agent
using Plots
plt = plot()
for (n,c) in counts
    plot!(plt, c, label=&quot;$n&quot;, lw=2)
end
plt</code></pre><?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewBox="0 0 2400 1600">
<defs>
  <clipPath id="clip810">
    <rect x="0" y="0" width="2400" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip810)" d="
M0 1600 L2400 1600 L2400 0 L0 0  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip811">
    <rect x="480" y="0" width="1681" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip810)" d="
M172.015 1486.45 L2352.76 1486.45 L2352.76 47.2441 L172.015 47.2441  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip812">
    <rect x="172" y="47" width="2182" height="1440"/>
  </clipPath>
</defs>
<polyline clip-path="url(#clip812)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  223.447,1486.45 223.447,47.2441 
  "/>
<polyline clip-path="url(#clip812)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  737.773,1486.45 737.773,47.2441 
  "/>
<polyline clip-path="url(#clip812)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1252.1,1486.45 1252.1,47.2441 
  "/>
<polyline clip-path="url(#clip812)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1766.42,1486.45 1766.42,47.2441 
  "/>
<polyline clip-path="url(#clip812)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  2280.75,1486.45 2280.75,47.2441 
  "/>
<polyline clip-path="url(#clip810)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,1486.45 2352.76,1486.45 
  "/>
<polyline clip-path="url(#clip810)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  223.447,1486.45 223.447,1467.55 
  "/>
<polyline clip-path="url(#clip810)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  737.773,1486.45 737.773,1467.55 
  "/>
<polyline clip-path="url(#clip810)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1252.1,1486.45 1252.1,1467.55 
  "/>
<polyline clip-path="url(#clip810)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1766.42,1486.45 1766.42,1467.55 
  "/>
<polyline clip-path="url(#clip810)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  2280.75,1486.45 2280.75,1467.55 
  "/>
<path clip-path="url(#clip810)" d="M223.447 1515.64 Q219.836 1515.64 218.008 1519.2 Q216.202 1522.75 216.202 1529.87 Q216.202 1536.98 218.008 1540.55 Q219.836 1544.09 223.447 1544.09 Q227.082 1544.09 228.887 1540.55 Q230.716 1536.98 230.716 1529.87 Q230.716 1522.75 228.887 1519.2 Q227.082 1515.64 223.447 1515.64 M223.447 1511.93 Q229.258 1511.93 232.313 1516.54 Q235.392 1521.12 235.392 1529.87 Q235.392 1538.6 232.313 1543.21 Q229.258 1547.79 223.447 1547.79 Q217.637 1547.79 214.559 1543.21 Q211.503 1538.6 211.503 1529.87 Q211.503 1521.12 214.559 1516.54 Q217.637 1511.93 223.447 1511.93 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M712.472 1512.56 L730.829 1512.56 L730.829 1516.5 L716.755 1516.5 L716.755 1524.97 Q717.773 1524.62 718.792 1524.46 Q719.81 1524.27 720.829 1524.27 Q726.616 1524.27 729.995 1527.44 Q733.375 1530.62 733.375 1536.03 Q733.375 1541.61 729.903 1544.71 Q726.431 1547.79 720.111 1547.79 Q717.935 1547.79 715.667 1547.42 Q713.421 1547.05 711.014 1546.31 L711.014 1541.61 Q713.097 1542.74 715.32 1543.3 Q717.542 1543.86 720.019 1543.86 Q724.023 1543.86 726.361 1541.75 Q728.699 1539.64 728.699 1536.03 Q728.699 1532.42 726.361 1530.31 Q724.023 1528.21 720.019 1528.21 Q718.144 1528.21 716.269 1528.62 Q714.417 1529.04 712.472 1529.92 L712.472 1512.56 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M752.588 1515.64 Q748.977 1515.64 747.148 1519.2 Q745.343 1522.75 745.343 1529.87 Q745.343 1536.98 747.148 1540.55 Q748.977 1544.09 752.588 1544.09 Q756.222 1544.09 758.028 1540.55 Q759.856 1536.98 759.856 1529.87 Q759.856 1522.75 758.028 1519.2 Q756.222 1515.64 752.588 1515.64 M752.588 1511.93 Q758.398 1511.93 761.454 1516.54 Q764.532 1521.12 764.532 1529.87 Q764.532 1538.6 761.454 1543.21 Q758.398 1547.79 752.588 1547.79 Q746.778 1547.79 743.699 1543.21 Q740.643 1538.6 740.643 1529.87 Q740.643 1521.12 743.699 1516.54 Q746.778 1511.93 752.588 1511.93 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M1211.71 1543.18 L1219.34 1543.18 L1219.34 1516.82 L1211.03 1518.49 L1211.03 1514.23 L1219.3 1512.56 L1223.97 1512.56 L1223.97 1543.18 L1231.61 1543.18 L1231.61 1547.12 L1211.71 1547.12 L1211.71 1543.18 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M1251.06 1515.64 Q1247.45 1515.64 1245.62 1519.2 Q1243.81 1522.75 1243.81 1529.87 Q1243.81 1536.98 1245.62 1540.55 Q1247.45 1544.09 1251.06 1544.09 Q1254.69 1544.09 1256.5 1540.55 Q1258.33 1536.98 1258.33 1529.87 Q1258.33 1522.75 1256.5 1519.2 Q1254.69 1515.64 1251.06 1515.64 M1251.06 1511.93 Q1256.87 1511.93 1259.92 1516.54 Q1263 1521.12 1263 1529.87 Q1263 1538.6 1259.92 1543.21 Q1256.87 1547.79 1251.06 1547.79 Q1245.25 1547.79 1242.17 1543.21 Q1239.11 1538.6 1239.11 1529.87 Q1239.11 1521.12 1242.17 1516.54 Q1245.25 1511.93 1251.06 1511.93 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M1281.22 1515.64 Q1277.61 1515.64 1275.78 1519.2 Q1273.97 1522.75 1273.97 1529.87 Q1273.97 1536.98 1275.78 1540.55 Q1277.61 1544.09 1281.22 1544.09 Q1284.85 1544.09 1286.66 1540.55 Q1288.49 1536.98 1288.49 1529.87 Q1288.49 1522.75 1286.66 1519.2 Q1284.85 1515.64 1281.22 1515.64 M1281.22 1511.93 Q1287.03 1511.93 1290.08 1516.54 Q1293.16 1521.12 1293.16 1529.87 Q1293.16 1538.6 1290.08 1543.21 Q1287.03 1547.79 1281.22 1547.79 Q1275.41 1547.79 1272.33 1543.21 Q1269.27 1538.6 1269.27 1529.87 Q1269.27 1521.12 1272.33 1516.54 Q1275.41 1511.93 1281.22 1511.93 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M1726.03 1543.18 L1733.67 1543.18 L1733.67 1516.82 L1725.36 1518.49 L1725.36 1514.23 L1733.62 1512.56 L1738.3 1512.56 L1738.3 1543.18 L1745.94 1543.18 L1745.94 1547.12 L1726.03 1547.12 L1726.03 1543.18 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M1755.43 1512.56 L1773.79 1512.56 L1773.79 1516.5 L1759.71 1516.5 L1759.71 1524.97 Q1760.73 1524.62 1761.75 1524.46 Q1762.77 1524.27 1763.79 1524.27 Q1769.57 1524.27 1772.95 1527.44 Q1776.33 1530.62 1776.33 1536.03 Q1776.33 1541.61 1772.86 1544.71 Q1769.39 1547.79 1763.07 1547.79 Q1760.89 1547.79 1758.62 1547.42 Q1756.38 1547.05 1753.97 1546.31 L1753.97 1541.61 Q1756.05 1542.74 1758.28 1543.3 Q1760.5 1543.86 1762.98 1543.86 Q1766.98 1543.86 1769.32 1541.75 Q1771.66 1539.64 1771.66 1536.03 Q1771.66 1532.42 1769.32 1530.31 Q1766.98 1528.21 1762.98 1528.21 Q1761.1 1528.21 1759.23 1528.62 Q1757.37 1529.04 1755.43 1529.92 L1755.43 1512.56 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M1795.54 1515.64 Q1791.93 1515.64 1790.11 1519.2 Q1788.3 1522.75 1788.3 1529.87 Q1788.3 1536.98 1790.11 1540.55 Q1791.93 1544.09 1795.54 1544.09 Q1799.18 1544.09 1800.98 1540.55 Q1802.81 1536.98 1802.81 1529.87 Q1802.81 1522.75 1800.98 1519.2 Q1799.18 1515.64 1795.54 1515.64 M1795.54 1511.93 Q1801.35 1511.93 1804.41 1516.54 Q1807.49 1521.12 1807.49 1529.87 Q1807.49 1538.6 1804.41 1543.21 Q1801.35 1547.79 1795.54 1547.79 Q1789.73 1547.79 1786.66 1543.21 Q1783.6 1538.6 1783.6 1529.87 Q1783.6 1521.12 1786.66 1516.54 Q1789.73 1511.93 1795.54 1511.93 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M2244.44 1543.18 L2260.76 1543.18 L2260.76 1547.12 L2238.82 1547.12 L2238.82 1543.18 Q2241.48 1540.43 2246.06 1535.8 Q2250.67 1531.15 2251.85 1529.81 Q2254.1 1527.28 2254.97 1525.55 Q2255.88 1523.79 2255.88 1522.1 Q2255.88 1519.34 2253.93 1517.61 Q2252.01 1515.87 2248.91 1515.87 Q2246.71 1515.87 2244.26 1516.63 Q2241.83 1517.4 2239.05 1518.95 L2239.05 1514.23 Q2241.87 1513.09 2244.33 1512.51 Q2246.78 1511.93 2248.82 1511.93 Q2254.19 1511.93 2257.38 1514.62 Q2260.58 1517.31 2260.58 1521.8 Q2260.58 1523.93 2259.77 1525.85 Q2258.98 1527.74 2256.87 1530.34 Q2256.29 1531.01 2253.19 1534.23 Q2250.09 1537.42 2244.44 1543.18 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M2280.58 1515.64 Q2276.97 1515.64 2275.14 1519.2 Q2273.33 1522.75 2273.33 1529.87 Q2273.33 1536.98 2275.14 1540.55 Q2276.97 1544.09 2280.58 1544.09 Q2284.21 1544.09 2286.02 1540.55 Q2287.85 1536.98 2287.85 1529.87 Q2287.85 1522.75 2286.02 1519.2 Q2284.21 1515.64 2280.58 1515.64 M2280.58 1511.93 Q2286.39 1511.93 2289.44 1516.54 Q2292.52 1521.12 2292.52 1529.87 Q2292.52 1538.6 2289.44 1543.21 Q2286.39 1547.79 2280.58 1547.79 Q2274.77 1547.79 2271.69 1543.21 Q2268.63 1538.6 2268.63 1529.87 Q2268.63 1521.12 2271.69 1516.54 Q2274.77 1511.93 2280.58 1511.93 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M2310.74 1515.64 Q2307.13 1515.64 2305.3 1519.2 Q2303.49 1522.75 2303.49 1529.87 Q2303.49 1536.98 2305.3 1540.55 Q2307.13 1544.09 2310.74 1544.09 Q2314.37 1544.09 2316.18 1540.55 Q2318.01 1536.98 2318.01 1529.87 Q2318.01 1522.75 2316.18 1519.2 Q2314.37 1515.64 2310.74 1515.64 M2310.74 1511.93 Q2316.55 1511.93 2319.6 1516.54 Q2322.68 1521.12 2322.68 1529.87 Q2322.68 1538.6 2319.6 1543.21 Q2316.55 1547.79 2310.74 1547.79 Q2304.93 1547.79 2301.85 1543.21 Q2298.79 1538.6 2298.79 1529.87 Q2298.79 1521.12 2301.85 1516.54 Q2304.93 1511.93 2310.74 1511.93 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip812)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,1448.14 2352.76,1448.14 
  "/>
<polyline clip-path="url(#clip812)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,1206.11 2352.76,1206.11 
  "/>
<polyline clip-path="url(#clip812)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,964.093 2352.76,964.093 
  "/>
<polyline clip-path="url(#clip812)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,722.072 2352.76,722.072 
  "/>
<polyline clip-path="url(#clip812)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,480.051 2352.76,480.051 
  "/>
<polyline clip-path="url(#clip812)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,238.029 2352.76,238.029 
  "/>
<polyline clip-path="url(#clip810)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,1486.45 172.015,47.2441 
  "/>
<polyline clip-path="url(#clip810)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,1448.14 190.912,1448.14 
  "/>
<polyline clip-path="url(#clip810)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,1206.11 190.912,1206.11 
  "/>
<polyline clip-path="url(#clip810)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,964.093 190.912,964.093 
  "/>
<polyline clip-path="url(#clip810)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,722.072 190.912,722.072 
  "/>
<polyline clip-path="url(#clip810)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,480.051 190.912,480.051 
  "/>
<polyline clip-path="url(#clip810)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,238.029 190.912,238.029 
  "/>
<path clip-path="url(#clip810)" d="M124.07 1433.93 Q120.459 1433.93 118.631 1437.5 Q116.825 1441.04 116.825 1448.17 Q116.825 1455.28 118.631 1458.84 Q120.459 1462.38 124.07 1462.38 Q127.705 1462.38 129.51 1458.84 Q131.339 1455.28 131.339 1448.17 Q131.339 1441.04 129.51 1437.5 Q127.705 1433.93 124.07 1433.93 M124.07 1430.23 Q129.881 1430.23 132.936 1434.84 Q136.015 1439.42 136.015 1448.17 Q136.015 1456.9 132.936 1461.5 Q129.881 1466.09 124.07 1466.09 Q118.26 1466.09 115.182 1461.5 Q112.126 1456.9 112.126 1448.17 Q112.126 1439.42 115.182 1434.84 Q118.26 1430.23 124.07 1430.23 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M54.5569 1219.46 L62.1958 1219.46 L62.1958 1193.09 L53.8856 1194.76 L53.8856 1190.5 L62.1495 1188.83 L66.8254 1188.83 L66.8254 1219.46 L74.4642 1219.46 L74.4642 1223.39 L54.5569 1223.39 L54.5569 1219.46 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M93.9086 1191.91 Q90.2975 1191.91 88.4688 1195.48 Q86.6632 1199.02 86.6632 1206.15 Q86.6632 1213.26 88.4688 1216.82 Q90.2975 1220.36 93.9086 1220.36 Q97.5428 1220.36 99.3483 1216.82 Q101.177 1213.26 101.177 1206.15 Q101.177 1199.02 99.3483 1195.48 Q97.5428 1191.91 93.9086 1191.91 M93.9086 1188.21 Q99.7187 1188.21 102.774 1192.82 Q105.853 1197.4 105.853 1206.15 Q105.853 1214.88 102.774 1219.48 Q99.7187 1224.07 93.9086 1224.07 Q88.0984 1224.07 85.0197 1219.48 Q81.9642 1214.88 81.9642 1206.15 Q81.9642 1197.4 85.0197 1192.82 Q88.0984 1188.21 93.9086 1188.21 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M124.07 1191.91 Q120.459 1191.91 118.631 1195.48 Q116.825 1199.02 116.825 1206.15 Q116.825 1213.26 118.631 1216.82 Q120.459 1220.36 124.07 1220.36 Q127.705 1220.36 129.51 1216.82 Q131.339 1213.26 131.339 1206.15 Q131.339 1199.02 129.51 1195.48 Q127.705 1191.91 124.07 1191.91 M124.07 1188.21 Q129.881 1188.21 132.936 1192.82 Q136.015 1197.4 136.015 1206.15 Q136.015 1214.88 132.936 1219.48 Q129.881 1224.07 124.07 1224.07 Q118.26 1224.07 115.182 1219.48 Q112.126 1214.88 112.126 1206.15 Q112.126 1197.4 115.182 1192.82 Q118.26 1188.21 124.07 1188.21 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M57.7745 977.438 L74.0939 977.438 L74.0939 981.373 L52.1495 981.373 L52.1495 977.438 Q54.8115 974.684 59.3949 970.054 Q64.0013 965.401 65.1819 964.059 Q67.4272 961.535 68.3068 959.799 Q69.2096 958.04 69.2096 956.35 Q69.2096 953.596 67.2652 951.86 Q65.3439 950.123 62.2421 950.123 Q60.043 950.123 57.5893 950.887 Q55.1588 951.651 52.381 953.202 L52.381 948.48 Q55.2051 947.346 57.6588 946.767 Q60.1124 946.188 62.1495 946.188 Q67.5198 946.188 70.7142 948.874 Q73.9087 951.559 73.9087 956.049 Q73.9087 958.179 73.0985 960.1 Q72.3115 961.998 70.205 964.591 Q69.6263 965.262 66.5245 968.48 Q63.4226 971.674 57.7745 977.438 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M93.9086 949.892 Q90.2975 949.892 88.4688 953.457 Q86.6632 956.998 86.6632 964.128 Q86.6632 971.234 88.4688 974.799 Q90.2975 978.341 93.9086 978.341 Q97.5428 978.341 99.3483 974.799 Q101.177 971.234 101.177 964.128 Q101.177 956.998 99.3483 953.457 Q97.5428 949.892 93.9086 949.892 M93.9086 946.188 Q99.7187 946.188 102.774 950.795 Q105.853 955.378 105.853 964.128 Q105.853 972.855 102.774 977.461 Q99.7187 982.045 93.9086 982.045 Q88.0984 982.045 85.0197 977.461 Q81.9642 972.855 81.9642 964.128 Q81.9642 955.378 85.0197 950.795 Q88.0984 946.188 93.9086 946.188 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M124.07 949.892 Q120.459 949.892 118.631 953.457 Q116.825 956.998 116.825 964.128 Q116.825 971.234 118.631 974.799 Q120.459 978.341 124.07 978.341 Q127.705 978.341 129.51 974.799 Q131.339 971.234 131.339 964.128 Q131.339 956.998 129.51 953.457 Q127.705 949.892 124.07 949.892 M124.07 946.188 Q129.881 946.188 132.936 950.795 Q136.015 955.378 136.015 964.128 Q136.015 972.855 132.936 977.461 Q129.881 982.045 124.07 982.045 Q118.26 982.045 115.182 977.461 Q112.126 972.855 112.126 964.128 Q112.126 955.378 115.182 950.795 Q118.26 946.188 124.07 946.188 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M67.9133 720.718 Q71.2698 721.435 73.1448 723.704 Q75.0429 725.972 75.0429 729.306 Q75.0429 734.422 71.5244 737.222 Q68.0059 740.023 61.5245 740.023 Q59.3486 740.023 57.0338 739.584 Q54.7421 739.167 52.2884 738.31 L52.2884 733.797 Q54.2328 734.931 56.5477 735.509 Q58.8625 736.088 61.3856 736.088 Q65.7837 736.088 68.0754 734.352 Q70.3902 732.616 70.3902 729.306 Q70.3902 726.25 68.2374 724.537 Q66.1078 722.801 62.2884 722.801 L58.2606 722.801 L58.2606 718.959 L62.4735 718.959 Q65.9226 718.959 67.7513 717.593 Q69.58 716.204 69.58 713.611 Q69.58 710.949 67.6819 709.537 Q65.8069 708.102 62.2884 708.102 Q60.3671 708.102 58.168 708.519 Q55.969 708.936 53.3301 709.815 L53.3301 705.649 Q55.9921 704.908 58.3069 704.537 Q60.6449 704.167 62.705 704.167 Q68.0291 704.167 71.1309 706.598 Q74.2327 709.005 74.2327 713.125 Q74.2327 715.996 72.5892 717.986 Q70.9457 719.954 67.9133 720.718 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M93.9086 707.871 Q90.2975 707.871 88.4688 711.436 Q86.6632 714.977 86.6632 722.107 Q86.6632 729.213 88.4688 732.778 Q90.2975 736.32 93.9086 736.32 Q97.5428 736.32 99.3483 732.778 Q101.177 729.213 101.177 722.107 Q101.177 714.977 99.3483 711.436 Q97.5428 707.871 93.9086 707.871 M93.9086 704.167 Q99.7187 704.167 102.774 708.774 Q105.853 713.357 105.853 722.107 Q105.853 730.834 102.774 735.44 Q99.7187 740.023 93.9086 740.023 Q88.0984 740.023 85.0197 735.44 Q81.9642 730.834 81.9642 722.107 Q81.9642 713.357 85.0197 708.774 Q88.0984 704.167 93.9086 704.167 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M124.07 707.871 Q120.459 707.871 118.631 711.436 Q116.825 714.977 116.825 722.107 Q116.825 729.213 118.631 732.778 Q120.459 736.32 124.07 736.32 Q127.705 736.32 129.51 732.778 Q131.339 729.213 131.339 722.107 Q131.339 714.977 129.51 711.436 Q127.705 707.871 124.07 707.871 M124.07 704.167 Q129.881 704.167 132.936 708.774 Q136.015 713.357 136.015 722.107 Q136.015 730.834 132.936 735.44 Q129.881 740.023 124.07 740.023 Q118.26 740.023 115.182 735.44 Q112.126 730.834 112.126 722.107 Q112.126 713.357 115.182 708.774 Q118.26 704.167 124.07 704.167 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M66.5939 466.845 L54.7884 485.294 L66.5939 485.294 L66.5939 466.845 M65.367 462.771 L71.2466 462.771 L71.2466 485.294 L76.1772 485.294 L76.1772 489.183 L71.2466 489.183 L71.2466 497.331 L66.5939 497.331 L66.5939 489.183 L50.9921 489.183 L50.9921 484.669 L65.367 462.771 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M93.9086 465.849 Q90.2975 465.849 88.4688 469.414 Q86.6632 472.956 86.6632 480.085 Q86.6632 487.192 88.4688 490.757 Q90.2975 494.298 93.9086 494.298 Q97.5428 494.298 99.3483 490.757 Q101.177 487.192 101.177 480.085 Q101.177 472.956 99.3483 469.414 Q97.5428 465.849 93.9086 465.849 M93.9086 462.146 Q99.7187 462.146 102.774 466.752 Q105.853 471.336 105.853 480.085 Q105.853 488.812 102.774 493.419 Q99.7187 498.002 93.9086 498.002 Q88.0984 498.002 85.0197 493.419 Q81.9642 488.812 81.9642 480.085 Q81.9642 471.336 85.0197 466.752 Q88.0984 462.146 93.9086 462.146 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M124.07 465.849 Q120.459 465.849 118.631 469.414 Q116.825 472.956 116.825 480.085 Q116.825 487.192 118.631 490.757 Q120.459 494.298 124.07 494.298 Q127.705 494.298 129.51 490.757 Q131.339 487.192 131.339 480.085 Q131.339 472.956 129.51 469.414 Q127.705 465.849 124.07 465.849 M124.07 462.146 Q129.881 462.146 132.936 466.752 Q136.015 471.336 136.015 480.085 Q136.015 488.812 132.936 493.419 Q129.881 498.002 124.07 498.002 Q118.26 498.002 115.182 493.419 Q112.126 488.812 112.126 480.085 Q112.126 471.336 115.182 466.752 Q118.26 462.146 124.07 462.146 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M53.793 220.749 L72.1494 220.749 L72.1494 224.685 L58.0754 224.685 L58.0754 233.157 Q59.0939 232.81 60.1124 232.648 Q61.131 232.462 62.1495 232.462 Q67.9365 232.462 71.3161 235.634 Q74.6957 238.805 74.6957 244.222 Q74.6957 249.8 71.2235 252.902 Q67.7513 255.981 61.4319 255.981 Q59.256 255.981 56.9875 255.61 Q54.7421 255.24 52.3347 254.499 L52.3347 249.8 Q54.418 250.934 56.6402 251.49 Q58.8625 252.046 61.3393 252.046 Q65.3439 252.046 67.6819 249.939 Q70.0198 247.833 70.0198 244.222 Q70.0198 240.61 67.6819 238.504 Q65.3439 236.398 61.3393 236.398 Q59.4643 236.398 57.5893 236.814 Q55.7375 237.231 53.793 238.11 L53.793 220.749 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M93.9086 223.828 Q90.2975 223.828 88.4688 227.393 Q86.6632 230.935 86.6632 238.064 Q86.6632 245.171 88.4688 248.735 Q90.2975 252.277 93.9086 252.277 Q97.5428 252.277 99.3483 248.735 Q101.177 245.171 101.177 238.064 Q101.177 230.935 99.3483 227.393 Q97.5428 223.828 93.9086 223.828 M93.9086 220.124 Q99.7187 220.124 102.774 224.731 Q105.853 229.314 105.853 238.064 Q105.853 246.791 102.774 251.397 Q99.7187 255.981 93.9086 255.981 Q88.0984 255.981 85.0197 251.397 Q81.9642 246.791 81.9642 238.064 Q81.9642 229.314 85.0197 224.731 Q88.0984 220.124 93.9086 220.124 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M124.07 223.828 Q120.459 223.828 118.631 227.393 Q116.825 230.935 116.825 238.064 Q116.825 245.171 118.631 248.735 Q120.459 252.277 124.07 252.277 Q127.705 252.277 129.51 248.735 Q131.339 245.171 131.339 238.064 Q131.339 230.935 129.51 227.393 Q127.705 223.828 124.07 223.828 M124.07 220.124 Q129.881 220.124 132.936 224.731 Q136.015 229.314 136.015 238.064 Q136.015 246.791 132.936 251.397 Q129.881 255.981 124.07 255.981 Q118.26 255.981 115.182 251.397 Q112.126 246.791 112.126 238.064 Q112.126 229.314 115.182 224.731 Q118.26 220.124 124.07 220.124 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip812)" style="stroke:#009af9; stroke-linecap:butt; stroke-linejoin:round; stroke-width:8; stroke-opacity:1; fill:none" points="
  233.734,1428.77 244.02,1428.77 254.307,1428.77 264.593,1428.77 274.88,1428.77 285.166,1428.77 295.453,1426.35 305.74,1426.35 316.026,1426.35 326.313,1426.35 
  336.599,1423.93 346.886,1423.93 357.172,1421.51 367.459,1421.51 377.745,1421.51 388.032,1421.51 398.318,1421.51 408.605,1421.51 418.891,1421.51 429.178,1421.51 
  439.464,1421.51 449.751,1421.51 460.037,1421.51 470.324,1421.51 480.61,1423.93 490.897,1423.93 501.183,1423.93 511.47,1423.93 521.756,1423.93 532.043,1423.93 
  542.329,1423.93 552.616,1426.35 562.902,1428.77 573.189,1426.35 583.475,1426.35 593.762,1423.93 604.048,1428.77 614.335,1431.19 624.621,1436.03 634.908,1438.46 
  645.194,1438.46 655.481,1438.46 665.768,1438.46 676.054,1443.3 686.341,1443.3 696.627,1445.72 
  "/>
<polyline clip-path="url(#clip812)" style="stroke:#e26f46; stroke-linecap:butt; stroke-linejoin:round; stroke-width:8; stroke-opacity:1; fill:none" points="
  233.734,238.029 244.02,392.923 254.307,632.524 264.593,876.966 274.88,1073 285.166,1220.64 295.453,1293.24 305.74,1351.33 316.026,1377.95 326.313,1399.73 
  336.599,1409.41 346.886,1411.83 357.172,1414.25 367.459,1414.25 377.745,1416.67 388.032,1419.09 398.318,1419.09 408.605,1419.09 418.891,1419.09 429.178,1264.2 
  439.464,1024.6 449.751,780.157 460.037,584.12 470.324,436.487 480.61,363.881 490.897,305.795 501.183,279.173 511.47,257.391 521.756,247.71 532.043,245.29 
  542.329,242.87 552.616,242.87 562.902,240.45 573.189,238.029 583.475,238.029 593.762,238.029 604.048,238.029 614.335,238.029 624.621,238.029 634.908,238.029 
  645.194,238.029 655.481,238.029 665.768,238.029 676.054,238.029 686.341,238.029 696.627,238.029 706.914,238.029 717.2,238.029 727.487,238.029 737.773,238.029 
  748.06,238.029 758.346,238.029 768.633,238.029 778.919,238.029 789.206,238.029 799.492,238.029 809.779,238.029 820.065,238.029 830.352,238.029 840.638,238.029 
  850.925,238.029 861.211,238.029 871.498,238.029 881.784,238.029 892.071,238.029 902.357,238.029 912.644,238.029 922.93,238.029 933.217,238.029 943.503,238.029 
  953.79,238.029 964.076,238.029 974.363,238.029 984.649,238.029 994.936,238.029 1005.22,238.029 1015.51,238.029 1025.8,238.029 1036.08,238.029 1046.37,238.029 
  1056.66,238.029 1066.94,238.029 1077.23,238.029 1087.51,238.029 1097.8,238.029 1108.09,238.029 1118.37,238.029 1128.66,238.029 1138.95,238.029 1149.23,238.029 
  1159.52,238.029 1169.81,238.029 1180.09,238.029 1190.38,238.029 1200.67,238.029 1210.95,238.029 1221.24,238.029 1231.53,238.029 1241.81,238.029 1252.1,238.029 
  1262.39,238.029 1272.67,238.029 1282.96,238.029 1293.24,238.029 1303.53,238.029 1313.82,238.029 1324.1,238.029 1334.39,238.029 1344.68,238.029 1354.96,238.029 
  1365.25,238.029 1375.54,238.029 1385.82,238.029 1396.11,238.029 1406.4,238.029 1416.68,238.029 1426.97,238.029 1437.26,238.029 1447.54,238.029 1457.83,238.029 
  1468.12,238.029 1478.4,238.029 1488.69,238.029 1498.98,238.029 1509.26,238.029 1519.55,238.029 1529.83,238.029 1540.12,238.029 1550.41,238.029 1560.69,238.029 
  1570.98,238.029 1581.27,238.029 1591.55,238.029 1601.84,238.029 1612.13,238.029 1622.41,238.029 1632.7,238.029 1642.99,238.029 1653.27,238.029 1663.56,238.029 
  1673.85,238.029 1684.13,238.029 1694.42,238.029 1704.71,238.029 1714.99,238.029 1725.28,238.029 1735.57,238.029 1745.85,238.029 1756.14,238.029 1766.42,238.029 
  1776.71,238.029 1787,238.029 1797.28,238.029 1807.57,238.029 1817.86,238.029 1828.14,238.029 1838.43,238.029 1848.72,238.029 1859,238.029 1869.29,238.029 
  1879.58,238.029 1889.86,238.029 1900.15,238.029 1910.44,238.029 1920.72,238.029 1931.01,238.029 1941.3,238.029 1951.58,238.029 1961.87,238.029 1972.15,238.029 
  1982.44,238.029 1992.73,238.029 2003.01,238.029 2013.3,238.029 2023.59,238.029 2033.87,238.029 2044.16,238.029 2054.45,238.029 2064.73,238.029 2075.02,238.029 
  2085.31,238.029 2095.59,238.029 2105.88,238.029 2116.17,238.029 2126.45,238.029 2136.74,238.029 2147.03,238.029 2157.31,238.029 2167.6,238.029 2177.89,238.029 
  2188.17,238.029 2198.46,238.029 2208.74,238.029 2219.03,238.029 2229.32,238.029 2239.6,238.029 2249.89,238.029 2260.18,238.029 2270.46,238.029 2280.75,238.029 
  2291.04,238.029 
  "/>
<polyline clip-path="url(#clip812)" style="stroke:#3da44d; stroke-linecap:butt; stroke-linejoin:round; stroke-width:8; stroke-opacity:1; fill:none" points="
  233.734,1206.11 244.02,995.556 254.307,726.912 264.593,405.024 274.88,204.146 285.166,87.9763 295.453,141.221 305.74,329.998 316.026,557.498 326.313,736.593 
  336.599,935.051 346.886,1060.9 357.172,1174.65 367.459,1283.56 377.745,1329.55 388.032,1373.11 398.318,1402.15 408.605,1414.25 418.891,1436.03 429.178,1440.88 
  439.464,1445.72 
  "/>
<path clip-path="url(#clip810)" d="
M1894.91 302.578 L2280.06 302.578 L2280.06 95.2176 L1894.91 95.2176  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<polyline clip-path="url(#clip810)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1894.91,302.578 2280.06,302.578 2280.06,95.2176 1894.91,95.2176 1894.91,302.578 
  "/>
<polyline clip-path="url(#clip810)" style="stroke:#009af9; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1919.14,147.058 2064.53,147.058 
  "/>
<path clip-path="url(#clip810)" d="M2088.76 129.778 L2093.48 129.778 L2100.75 158.99 L2107.99 129.778 L2113.25 129.778 L2120.52 158.99 L2127.76 129.778 L2132.51 129.778 L2123.83 164.338 L2117.95 164.338 L2110.66 134.338 L2103.29 164.338 L2097.41 164.338 L2088.76 129.778 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M2145.79 141.398 Q2142.37 141.398 2140.38 144.083 Q2138.39 146.745 2138.39 151.398 Q2138.39 156.051 2140.35 158.736 Q2142.34 161.398 2145.79 161.398 Q2149.2 161.398 2151.19 158.713 Q2153.18 156.027 2153.18 151.398 Q2153.18 146.791 2151.19 144.106 Q2149.2 141.398 2145.79 141.398 M2145.79 137.787 Q2151.35 137.787 2154.52 141.398 Q2157.69 145.009 2157.69 151.398 Q2157.69 157.764 2154.52 161.398 Q2151.35 165.009 2145.79 165.009 Q2140.22 165.009 2137.04 161.398 Q2133.9 157.764 2133.9 151.398 Q2133.9 145.009 2137.04 141.398 Q2140.22 137.787 2145.79 137.787 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M2164.75 128.319 L2169.01 128.319 L2169.01 164.338 L2164.75 164.338 L2164.75 128.319 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M2191.05 128.319 L2191.05 131.861 L2186.97 131.861 Q2184.68 131.861 2183.78 132.787 Q2182.9 133.713 2182.9 136.12 L2182.9 138.412 L2189.91 138.412 L2189.91 141.722 L2182.9 141.722 L2182.9 164.338 L2178.62 164.338 L2178.62 141.722 L2174.54 141.722 L2174.54 138.412 L2178.62 138.412 L2178.62 136.606 Q2178.62 132.278 2180.63 130.31 Q2182.65 128.319 2187.02 128.319 L2191.05 128.319 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip810)" style="stroke:#e26f46; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1919.14,198.898 2064.53,198.898 
  "/>
<path clip-path="url(#clip810)" d="M2114.31 211.247 L2114.31 201.965 L2106.67 201.965 L2106.67 198.122 L2118.94 198.122 L2118.94 212.96 Q2116.23 214.881 2112.97 215.877 Q2109.71 216.849 2106 216.849 Q2097.9 216.849 2093.32 212.127 Q2088.76 207.381 2088.76 198.932 Q2088.76 190.46 2093.32 185.738 Q2097.9 180.993 2106 180.993 Q2109.38 180.993 2112.41 181.826 Q2115.47 182.659 2118.04 184.28 L2118.04 189.256 Q2115.45 187.057 2112.53 185.946 Q2109.61 184.835 2106.4 184.835 Q2100.05 184.835 2096.86 188.377 Q2093.69 191.918 2093.69 198.932 Q2093.69 205.923 2096.86 209.465 Q2100.05 213.006 2106.4 213.006 Q2108.87 213.006 2110.82 212.59 Q2112.76 212.15 2114.31 211.247 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M2142.32 194.233 Q2141.6 193.817 2140.75 193.631 Q2139.91 193.423 2138.9 193.423 Q2135.28 193.423 2133.34 195.784 Q2131.42 198.122 2131.42 202.52 L2131.42 216.178 L2127.14 216.178 L2127.14 190.252 L2131.42 190.252 L2131.42 194.28 Q2132.76 191.918 2134.91 190.784 Q2137.07 189.627 2140.15 189.627 Q2140.59 189.627 2141.12 189.696 Q2141.65 189.743 2142.3 189.858 L2142.32 194.233 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M2158.57 203.145 Q2153.41 203.145 2151.42 204.326 Q2149.43 205.506 2149.43 208.354 Q2149.43 210.622 2150.91 211.965 Q2152.41 213.284 2154.98 213.284 Q2158.53 213.284 2160.65 210.784 Q2162.81 208.261 2162.81 204.094 L2162.81 203.145 L2158.57 203.145 M2167.07 201.386 L2167.07 216.178 L2162.81 216.178 L2162.81 212.242 Q2161.35 214.603 2159.17 215.738 Q2157 216.849 2153.85 216.849 Q2149.87 216.849 2147.51 214.627 Q2145.17 212.381 2145.17 208.631 Q2145.17 204.256 2148.09 202.034 Q2151.03 199.812 2156.84 199.812 L2162.81 199.812 L2162.81 199.395 Q2162.81 196.455 2160.86 194.858 Q2158.94 193.238 2155.45 193.238 Q2153.22 193.238 2151.12 193.77 Q2149.01 194.303 2147.07 195.367 L2147.07 191.432 Q2149.4 190.53 2151.6 190.09 Q2153.8 189.627 2155.89 189.627 Q2161.51 189.627 2164.29 192.543 Q2167.07 195.46 2167.07 201.386 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M2192.37 191.016 L2192.37 195.043 Q2190.56 194.117 2188.62 193.655 Q2186.67 193.192 2184.59 193.192 Q2181.42 193.192 2179.82 194.164 Q2178.25 195.136 2178.25 197.08 Q2178.25 198.562 2179.38 199.418 Q2180.52 200.252 2183.94 201.016 L2185.4 201.34 Q2189.94 202.312 2191.84 204.094 Q2193.76 205.854 2193.76 209.025 Q2193.76 212.636 2190.89 214.742 Q2188.04 216.849 2183.04 216.849 Q2180.96 216.849 2178.69 216.432 Q2176.44 216.039 2173.94 215.228 L2173.94 210.83 Q2176.3 212.057 2178.59 212.682 Q2180.89 213.284 2183.13 213.284 Q2186.14 213.284 2187.76 212.266 Q2189.38 211.224 2189.38 209.349 Q2189.38 207.613 2188.2 206.687 Q2187.04 205.761 2183.09 204.904 L2181.6 204.557 Q2177.65 203.724 2175.89 202.011 Q2174.13 200.275 2174.13 197.266 Q2174.13 193.608 2176.72 191.618 Q2179.31 189.627 2184.08 189.627 Q2186.44 189.627 2188.53 189.974 Q2190.61 190.321 2192.37 191.016 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M2217.07 191.016 L2217.07 195.043 Q2215.26 194.117 2213.32 193.655 Q2211.37 193.192 2209.29 193.192 Q2206.12 193.192 2204.52 194.164 Q2202.95 195.136 2202.95 197.08 Q2202.95 198.562 2204.08 199.418 Q2205.21 200.252 2208.64 201.016 L2210.1 201.34 Q2214.64 202.312 2216.53 204.094 Q2218.46 205.854 2218.46 209.025 Q2218.46 212.636 2215.59 214.742 Q2212.74 216.849 2207.74 216.849 Q2205.65 216.849 2203.39 216.432 Q2201.14 216.039 2198.64 215.228 L2198.64 210.83 Q2201 212.057 2203.29 212.682 Q2205.59 213.284 2207.83 213.284 Q2210.84 213.284 2212.46 212.266 Q2214.08 211.224 2214.08 209.349 Q2214.08 207.613 2212.9 206.687 Q2211.74 205.761 2207.78 204.904 L2206.3 204.557 Q2202.34 203.724 2200.59 202.011 Q2198.83 200.275 2198.83 197.266 Q2198.83 193.608 2201.42 191.618 Q2204.01 189.627 2208.78 189.627 Q2211.14 189.627 2213.22 189.974 Q2215.31 190.321 2217.07 191.016 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip810)" style="stroke:#3da44d; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1919.14,250.738 2064.53,250.738 
  "/>
<path clip-path="url(#clip810)" d="M2111 234.592 L2111 239.152 Q2108.34 237.879 2105.98 237.254 Q2103.62 236.629 2101.42 236.629 Q2097.6 236.629 2095.52 238.11 Q2093.46 239.592 2093.46 242.323 Q2093.46 244.615 2094.82 245.795 Q2096.21 246.953 2100.05 247.67 L2102.88 248.249 Q2108.11 249.245 2110.59 251.768 Q2113.09 254.268 2113.09 258.481 Q2113.09 263.504 2109.71 266.096 Q2106.35 268.689 2099.85 268.689 Q2097.39 268.689 2094.61 268.133 Q2091.86 267.578 2088.9 266.49 L2088.9 261.675 Q2091.74 263.272 2094.47 264.082 Q2097.21 264.893 2099.85 264.893 Q2103.85 264.893 2106.03 263.319 Q2108.2 261.744 2108.2 258.828 Q2108.2 256.282 2106.63 254.846 Q2105.08 253.411 2101.51 252.694 L2098.66 252.138 Q2093.43 251.096 2091.1 248.874 Q2088.76 246.652 2088.76 242.694 Q2088.76 238.11 2091.97 235.471 Q2095.22 232.833 2100.89 232.833 Q2103.32 232.833 2105.84 233.272 Q2108.36 233.712 2111 234.592 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M2141.74 252.369 L2141.74 268.018 L2137.48 268.018 L2137.48 252.508 Q2137.48 248.828 2136.05 246.999 Q2134.61 245.17 2131.74 245.17 Q2128.29 245.17 2126.3 247.37 Q2124.31 249.569 2124.31 253.365 L2124.31 268.018 L2120.03 268.018 L2120.03 231.999 L2124.31 231.999 L2124.31 246.12 Q2125.84 243.782 2127.9 242.624 Q2129.98 241.467 2132.69 241.467 Q2137.16 241.467 2139.45 244.245 Q2141.74 246.999 2141.74 252.369 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M2172.41 253.99 L2172.41 256.073 L2152.83 256.073 Q2153.11 260.471 2155.47 262.786 Q2157.85 265.078 2162.09 265.078 Q2164.54 265.078 2166.84 264.476 Q2169.15 263.874 2171.42 262.67 L2171.42 266.698 Q2169.13 267.67 2166.72 268.18 Q2164.31 268.689 2161.84 268.689 Q2155.63 268.689 2152 265.078 Q2148.39 261.467 2148.39 255.309 Q2148.39 248.944 2151.81 245.217 Q2155.26 241.467 2161.09 241.467 Q2166.33 241.467 2169.36 244.846 Q2172.41 248.203 2172.41 253.99 M2168.15 252.74 Q2168.11 249.245 2166.19 247.161 Q2164.29 245.078 2161.14 245.078 Q2157.58 245.078 2155.42 247.092 Q2153.29 249.106 2152.97 252.763 L2168.15 252.74 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M2201.58 253.99 L2201.58 256.073 L2182 256.073 Q2182.28 260.471 2184.64 262.786 Q2187.02 265.078 2191.26 265.078 Q2193.71 265.078 2196 264.476 Q2198.32 263.874 2200.59 262.67 L2200.59 266.698 Q2198.29 267.67 2195.89 268.18 Q2193.48 268.689 2191 268.689 Q2184.8 268.689 2181.16 265.078 Q2177.55 261.467 2177.55 255.309 Q2177.55 248.944 2180.98 245.217 Q2184.43 241.467 2190.26 241.467 Q2195.49 241.467 2198.53 244.846 Q2201.58 248.203 2201.58 253.99 M2197.32 252.74 Q2197.28 249.245 2195.35 247.161 Q2193.46 245.078 2190.31 245.078 Q2186.74 245.078 2184.59 247.092 Q2182.46 249.106 2182.14 252.763 L2197.32 252.74 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip810)" d="M2212.69 264.129 L2212.69 277.879 L2208.41 277.879 L2208.41 242.092 L2212.69 242.092 L2212.69 246.027 Q2214.03 243.712 2216.07 242.601 Q2218.13 241.467 2220.98 241.467 Q2225.7 241.467 2228.64 245.217 Q2231.6 248.967 2231.6 255.078 Q2231.6 261.189 2228.64 264.939 Q2225.7 268.689 2220.98 268.689 Q2218.13 268.689 2216.07 267.578 Q2214.03 266.443 2212.69 264.129 M2227.18 255.078 Q2227.18 250.379 2225.24 247.717 Q2223.32 245.032 2219.94 245.032 Q2216.56 245.032 2214.61 247.717 Q2212.69 250.379 2212.69 255.078 Q2212.69 259.777 2214.61 262.462 Q2216.56 265.124 2219.94 265.124 Q2223.32 265.124 2225.24 262.462 Q2227.18 259.777 2227.18 255.078 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /></svg>
<h2 id="Female-and-Male-Sheep"><a class="docs-heading-anchor" href="#Female-and-Male-Sheep">Female &amp; Male Sheep</a><a id="Female-and-Male-Sheep-1"></a><a class="docs-heading-anchor-permalink" href="#Female-and-Male-Sheep" title="Permalink"></a></h2><p>The goal of the last part of the lab is to demonstrate the <a href="lecture_03/@ref forwarding_method">forwarding method</a> by implementing a sheep that can have two different sexes and can only reproduce with another sheep of opposite sex.</p><p>This new type of sheep needs an additonal field <code>sex::Symbol</code> which can be either <code>:male</code> or <code>:female</code>. In OOP we would now simply inherit from <code>Sheep</code> and create a <code>⚥Sheep</code> with an additional field. In Julia there is no inheritance - only subtyping of abstract types. As you cannot inherit from a concrete type in Julia, we will have to create a wrapper type and forward all necessary methods. This is typically a sign of unfortunate type tree design and should be avoided, but if you want to extend a code base by an unforeseen type this forwarding of methods is a nice work-around.  Our <code>⚥Sheep</code> type will simply contain a classic <code>sheep</code> and a <code>sex</code> field</p><pre><code class="language-julia hljs">struct ⚥Sheep{T&lt;:Real} &lt;: AbstractAnimal
    sheep::Sheep{T}
    sex::Symbol
end
⚥Sheep(E,ΔE,pr,pf,sex) = ⚥Sheep(Sheep(E,ΔE,pr,pf),sex)</code></pre><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; ⚥Sheep(1.0,1.0,1.0,1.0,:female)</code><code class="nohighlight hljs ansi" style="display:block;">⚥Sheep{Float64}(Sheep{Float64}(1.0, 1.0, 1.0, 1.0), :female)</code></pre><p>In our case, the methods that have to be forwarded are <code>agent_step!</code>, <code>reproduce!</code>, <code>eats</code> and <code>eat!</code>.  The custom reproduction behaviour will of course be taken care of by a <code>reproduce!</code> function that does not just forward but also contains specialized behaviour for the <code>⚥Sheep</code>.</p><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise</header>
<div class="admonition-body"><p>Forward the accessors <code>energy</code>, <code>energy!</code>, <code>reproduction_prob</code>, and <code>food_prob</code>, as well as our core methods <code>eats</code> and <code>eat!</code> to <code>Sheep</code>.</p></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><pre><code class="language-julia hljs">energy(g::⚥Sheep) = energy(g.sheep)
energy!(g::⚥Sheep, ΔE) = energy!(g.sheep, ΔE)
reproduction_prob(g::⚥Sheep) = reproduction_prob(g.sheep)
food_prob(g::⚥Sheep) = food_prob(g.sheep)

eats(::⚥Sheep, ::Grass) = true
eats(::⚥Sheep, ::PoisonedGrass) = true
eat!(s::⚥Sheep, g::AbstractPlant, w::World) = eat!(s.sheep, g, w)</code></pre></p></details><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise</header>
<div class="admonition-body"><p>Implement the <code>reproduce!</code> method for the <code>⚥Sheep</code>.  Note that you first have to find another sheep of opposite sex in your <code>World</code>, and only if you can find one you can reproduce.</p></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><pre><code class="language-julia hljs">mates(a::AbstractPlant, ::⚥Sheep) = false
mates(a::AbstractAnimal, ::⚥Sheep) = false
mates(g1::⚥Sheep, g2::⚥Sheep) = g1.sex != g2.sex
function find_mate(g::⚥Sheep, w::World)
    ms = filter(a-&gt;mates(a,g), w.agents)
    isempty(ms) ? nothing : sample(ms)
end

function reproduce!(s::⚥Sheep, w::World)
    m = find_mate(s,w)
    if !isnothing(m)
        energy!(s, energy(s)/2)
        # TODO: should probably mix s/m
        push!(w.agents, deepcopy(s))
    end
end</code></pre></p></details></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../lecture_02/hw/">« Homework</a><a class="docs-footer-nextpage" href="../hw/">Homework »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.6 on <span class="colophon-date" title="Tuesday 21 September 2021 10:28">Tuesday 21 September 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
