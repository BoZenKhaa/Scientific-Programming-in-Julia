<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Lab · Scientific Programming in Julia</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://JuliaTeachingCTU.github.io/Scientific-Programming-in-Julia/lecture_03/lab/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.svg" alt="Scientific Programming in Julia logo"/><img class="docs-dark-only" src="../../assets/logo-dark.svg" alt="Scientific Programming in Julia logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Scientific Programming in Julia</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../installation/">Installation</a></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">1: Introduction</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_01/motivation/">Motivation</a></li><li><a class="tocitem" href="../../lecture_01/basics/">Basics</a></li><li><a class="tocitem" href="../../lecture_01/demo/">Examples</a></li><li><a class="tocitem" href="../../lecture_01/outline/">Outline</a></li><li><a class="tocitem" href="../../lecture_01/lab/">Lab</a></li><li><a class="tocitem" href="../../lecture_01/hw/">Homework</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">2: The power of Type System &amp; multiple dispatch</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_02/lecture/">Lecture</a></li><li><a class="tocitem" href="../../lecture_02/lab/">Lab</a></li><li><a class="tocitem" href="../../lecture_02/hw/">Homework</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox" checked/><label class="tocitem" for="menuitem-5"><span class="docs-label">3: Design patterns</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Lab</a><ul class="internal"><li><a class="tocitem" href="#Reproduction"><span>Reproduction</span></a></li><li><a class="tocitem" href="#One-step-at-a-time"><span>One step at a time</span></a></li><li><a class="tocitem" href="#Simulate-the-world!"><span>Simulate the world!</span></a></li><li><a class="tocitem" href="#Female-and-Male-Sheep"><span>Female &amp; Male Sheep</span></a></li></ul></li><li><a class="tocitem" href="../hw/">Homework</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">4: Packages development, environments, etc...</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_04/lab/">Lab</a></li></ul></li><li><span class="tocitem">5: Benchmarking, profiling, and performance gotchas</span></li><li><span class="tocitem">6: Language introspection</span></li><li><input class="collapse-toggle" id="menuitem-9" type="checkbox"/><label class="tocitem" for="menuitem-9"><span class="docs-label">7: Macros</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_07/macros/">Macros</a></li></ul></li><li><span class="tocitem">8: Introduction to automatic differentiation</span></li><li><span class="tocitem">9: Manipulating intermediate representation</span></li><li><span class="tocitem">10: Different levels of parallel programming</span></li><li><span class="tocitem">11: Julia for GPU programming</span></li><li><span class="tocitem">12: Uncertainty propagation in ODE</span></li><li><span class="tocitem">13: Learning ODE from data</span></li><li><a class="tocitem" href="../../how_to_submit_hw/">How to submit homeworks</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">3: Design patterns</a></li><li class="is-active"><a href>Lab</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Lab</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaTeachingCTU/Scientific-Programming-in-Julia/blob/master/docs/src/lecture_03/lab.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="lab03"><a class="docs-heading-anchor" href="#lab03">Lab 3: Predator-Prey Agents</a><a id="lab03-1"></a><a class="docs-heading-anchor-permalink" href="#lab03" title="Permalink"></a></h1><p>In this lab we will finalize our predator-prey agent simulation such that we can simulate a number of steps and get a plot like below.</p><p><img src="../pred-prey.png" alt="img"/></p><h2 id="Reproduction"><a class="docs-heading-anchor" href="#Reproduction">Reproduction</a><a id="Reproduction-1"></a><a class="docs-heading-anchor-permalink" href="#Reproduction" title="Permalink"></a></h2><p>Currently our animals can only eat. In our simulation we also want them to reproduce. We will do this by adding a <code>reproduce!</code> method to <code>AbstractAnimal</code>.</p><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise</header>
<div class="admonition-body"><p>Write a function <code>reproduce!</code> that takes an <code>AbstractAnimal</code> and a <code>World</code>. Reproducing will cost an animal half of its energy and then add an identical copy of the given animal to the world.</p></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><pre><code class="language-julia hljs">function reproduce!(a::AbstractAnimal, w::World)
    energy!(a, energy(a)/2)
    push!(w.agents, deepcopy(a))
end</code></pre></p></details><h2 id="One-step-at-a-time"><a class="docs-heading-anchor" href="#One-step-at-a-time">One step at a time</a><a id="One-step-at-a-time-1"></a><a class="docs-heading-anchor-permalink" href="#One-step-at-a-time" title="Permalink"></a></h2><p>One iteration of our simulation will be carried out by a function called <code>agent_step!(::AbstractAgent, ::World)</code>. Implement one method for <code>AbstractPlant</code>s and one for <code>AbstractAnimal</code>s.</p><p>An <code>AbstractPlant</code> will grow if it is not fully grown (i.e. decrease growth counter).  If the growth counter has reached zero, the <code>fully_grown</code> flag has to be set to <code>true</code> and the counter reset to <code>regrowth_time</code>.</p><p>An <code>AbstractAnimal</code> will loose one unit of energy in every step.  Then it will try to find food and eat. After eating, if its energy is less than zero, the animal dies.  If it is still alive, it will try to reproduce with the probablitiy <span>$p_r$</span>.</p><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise</header>
<div class="admonition-body"><p>Implement the function <code>agent_step!</code> with specialized methods for <code>AbstractAnimal</code>s and <code>AbstractPlant</code>s.</p></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><pre><code class="language-julia hljs">function agent_step!(a::AbstractPlant, w::World)
    if !fully_grown(a)
        if countdown(a) &lt;= 0
            fully_grown!(a,true)
            reset!(a)
        else
            incr_countdown!(a,-1)
        end
    end
    return a
end

function agent_step!(a::AbstractAnimal, w::World)
    incr_energy!(a,-1)
    dinner = find_food(a,w)
    eat!(a, dinner, w)
    if energy(a) &lt; 0
        kill_agent!(a,w)
        return
    end
    if rand() &lt;= reproduction_prob(a)
        reproduce!(a,w)
    end
    return a
end</code></pre></p></details><h2 id="Simulate-the-world!"><a class="docs-heading-anchor" href="#Simulate-the-world!">Simulate the world!</a><a id="Simulate-the-world!-1"></a><a class="docs-heading-anchor-permalink" href="#Simulate-the-world!" title="Permalink"></a></h2><p>The last function we need for our simulation just needs to run a number of steps. In practice we often want varying logging behaviour which we can implement nicely using <em>callbacks</em>.</p><p>An exemplary callback could just log the agent count at every step:</p><pre><code class="language-julia hljs">log_count(w::World) = @info agent_count(w)</code></pre><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise</header>
<div class="admonition-body"><p>Implement a function <code>simulate!(w::World, iters::Int; callbacks=[])</code> which runs a number of iterations (i.e. <code>agent_step!</code>s) and applies passed callbacks of the form <code>callback(::World)</code> after each iteration.</p></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><pre><code class="language-julia hljs">function simulate!(w::World, iters::Int; callbacks=[])
    for i in 1:iters
        for a in w.agents
            agent_step!(a,w)
        end
        for cb in callbacks
            cb(w)
        end
    end
end</code></pre></p></details><p>Now lets try to run our first fully fledged simulation!  Below you can find some parameters that will often result in nice oscillations like in the plot at the beginning of the lab.</p><pre><code class="language-julia hljs">n_grass       = 500
regrowth_time = 17.0

n_sheep         = 100
Δenergy_sheep   = 5.0
sheep_reproduce = 0.5
sheep_foodprob  = 0.4

n_wolves       = 8
Δenergy_wolf   = 17.0
wolf_reproduce = 0.03
wolf_foodprob  = 0.02

gs = [Grass(true,regrowth_time,regrowth_time) for _ in 1:n_grass]
ss = [Sheep(2*Δenergy_sheep,Δenergy_sheep,sheep_reproduce, sheep_foodprob) for _ in 1:n_sheep]
ws = [Wolf(2*Δenergy_wolf,Δenergy_wolf,wolf_reproduce, wolf_foodprob) for _ in 1:n_wolves]

w = World(vcat(gs,ss,ws))

# construct a global variable to store agent counts at every step
counts = Dict(n=&gt;[c] for (n,c) in agent_count(w))
# callback to save current counts
function save_agent_count(w::World)
    for (n,c) in agent_count(w)
        push!(counts[n],c)
    end
end

cbs = [
    w-&gt;(@info agent_count(w)),
    save_agent_count
]

simulate!(w, 200, callbacks=cbs)

# plot the count trajectories for every type of agent
using Plots
plt = plot()
for (n,c) in counts
    plot!(plt, c, label=&quot;$n&quot;, lw=2)
end
plt</code></pre><?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewBox="0 0 2400 1600">
<defs>
  <clipPath id="clip730">
    <rect x="0" y="0" width="2400" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip730)" d="
M0 1600 L2400 1600 L2400 0 L0 0  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip731">
    <rect x="480" y="0" width="1681" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip730)" d="
M172.015 1486.45 L2352.76 1486.45 L2352.76 47.2441 L172.015 47.2441  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip732">
    <rect x="172" y="47" width="2182" height="1440"/>
  </clipPath>
</defs>
<polyline clip-path="url(#clip732)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  223.447,1486.45 223.447,47.2441 
  "/>
<polyline clip-path="url(#clip732)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  737.773,1486.45 737.773,47.2441 
  "/>
<polyline clip-path="url(#clip732)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1252.1,1486.45 1252.1,47.2441 
  "/>
<polyline clip-path="url(#clip732)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1766.42,1486.45 1766.42,47.2441 
  "/>
<polyline clip-path="url(#clip732)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  2280.75,1486.45 2280.75,47.2441 
  "/>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,1486.45 2352.76,1486.45 
  "/>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  223.447,1486.45 223.447,1467.55 
  "/>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  737.773,1486.45 737.773,1467.55 
  "/>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1252.1,1486.45 1252.1,1467.55 
  "/>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1766.42,1486.45 1766.42,1467.55 
  "/>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  2280.75,1486.45 2280.75,1467.55 
  "/>
<path clip-path="url(#clip730)" d="M223.447 1515.64 Q219.836 1515.64 218.008 1519.2 Q216.202 1522.75 216.202 1529.87 Q216.202 1536.98 218.008 1540.55 Q219.836 1544.09 223.447 1544.09 Q227.082 1544.09 228.887 1540.55 Q230.716 1536.98 230.716 1529.87 Q230.716 1522.75 228.887 1519.2 Q227.082 1515.64 223.447 1515.64 M223.447 1511.93 Q229.258 1511.93 232.313 1516.54 Q235.392 1521.12 235.392 1529.87 Q235.392 1538.6 232.313 1543.21 Q229.258 1547.79 223.447 1547.79 Q217.637 1547.79 214.559 1543.21 Q211.503 1538.6 211.503 1529.87 Q211.503 1521.12 214.559 1516.54 Q217.637 1511.93 223.447 1511.93 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M712.472 1512.56 L730.829 1512.56 L730.829 1516.5 L716.755 1516.5 L716.755 1524.97 Q717.773 1524.62 718.792 1524.46 Q719.81 1524.27 720.829 1524.27 Q726.616 1524.27 729.995 1527.44 Q733.375 1530.62 733.375 1536.03 Q733.375 1541.61 729.903 1544.71 Q726.431 1547.79 720.111 1547.79 Q717.935 1547.79 715.667 1547.42 Q713.421 1547.05 711.014 1546.31 L711.014 1541.61 Q713.097 1542.74 715.32 1543.3 Q717.542 1543.86 720.019 1543.86 Q724.023 1543.86 726.361 1541.75 Q728.699 1539.64 728.699 1536.03 Q728.699 1532.42 726.361 1530.31 Q724.023 1528.21 720.019 1528.21 Q718.144 1528.21 716.269 1528.62 Q714.417 1529.04 712.472 1529.92 L712.472 1512.56 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M752.588 1515.64 Q748.977 1515.64 747.148 1519.2 Q745.343 1522.75 745.343 1529.87 Q745.343 1536.98 747.148 1540.55 Q748.977 1544.09 752.588 1544.09 Q756.222 1544.09 758.028 1540.55 Q759.856 1536.98 759.856 1529.87 Q759.856 1522.75 758.028 1519.2 Q756.222 1515.64 752.588 1515.64 M752.588 1511.93 Q758.398 1511.93 761.454 1516.54 Q764.532 1521.12 764.532 1529.87 Q764.532 1538.6 761.454 1543.21 Q758.398 1547.79 752.588 1547.79 Q746.778 1547.79 743.699 1543.21 Q740.643 1538.6 740.643 1529.87 Q740.643 1521.12 743.699 1516.54 Q746.778 1511.93 752.588 1511.93 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M1211.71 1543.18 L1219.34 1543.18 L1219.34 1516.82 L1211.03 1518.49 L1211.03 1514.23 L1219.3 1512.56 L1223.97 1512.56 L1223.97 1543.18 L1231.61 1543.18 L1231.61 1547.12 L1211.71 1547.12 L1211.71 1543.18 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M1251.06 1515.64 Q1247.45 1515.64 1245.62 1519.2 Q1243.81 1522.75 1243.81 1529.87 Q1243.81 1536.98 1245.62 1540.55 Q1247.45 1544.09 1251.06 1544.09 Q1254.69 1544.09 1256.5 1540.55 Q1258.33 1536.98 1258.33 1529.87 Q1258.33 1522.75 1256.5 1519.2 Q1254.69 1515.64 1251.06 1515.64 M1251.06 1511.93 Q1256.87 1511.93 1259.92 1516.54 Q1263 1521.12 1263 1529.87 Q1263 1538.6 1259.92 1543.21 Q1256.87 1547.79 1251.06 1547.79 Q1245.25 1547.79 1242.17 1543.21 Q1239.11 1538.6 1239.11 1529.87 Q1239.11 1521.12 1242.17 1516.54 Q1245.25 1511.93 1251.06 1511.93 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M1281.22 1515.64 Q1277.61 1515.64 1275.78 1519.2 Q1273.97 1522.75 1273.97 1529.87 Q1273.97 1536.98 1275.78 1540.55 Q1277.61 1544.09 1281.22 1544.09 Q1284.85 1544.09 1286.66 1540.55 Q1288.49 1536.98 1288.49 1529.87 Q1288.49 1522.75 1286.66 1519.2 Q1284.85 1515.64 1281.22 1515.64 M1281.22 1511.93 Q1287.03 1511.93 1290.08 1516.54 Q1293.16 1521.12 1293.16 1529.87 Q1293.16 1538.6 1290.08 1543.21 Q1287.03 1547.79 1281.22 1547.79 Q1275.41 1547.79 1272.33 1543.21 Q1269.27 1538.6 1269.27 1529.87 Q1269.27 1521.12 1272.33 1516.54 Q1275.41 1511.93 1281.22 1511.93 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M1726.03 1543.18 L1733.67 1543.18 L1733.67 1516.82 L1725.36 1518.49 L1725.36 1514.23 L1733.62 1512.56 L1738.3 1512.56 L1738.3 1543.18 L1745.94 1543.18 L1745.94 1547.12 L1726.03 1547.12 L1726.03 1543.18 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M1755.43 1512.56 L1773.79 1512.56 L1773.79 1516.5 L1759.71 1516.5 L1759.71 1524.97 Q1760.73 1524.62 1761.75 1524.46 Q1762.77 1524.27 1763.79 1524.27 Q1769.57 1524.27 1772.95 1527.44 Q1776.33 1530.62 1776.33 1536.03 Q1776.33 1541.61 1772.86 1544.71 Q1769.39 1547.79 1763.07 1547.79 Q1760.89 1547.79 1758.62 1547.42 Q1756.38 1547.05 1753.97 1546.31 L1753.97 1541.61 Q1756.05 1542.74 1758.28 1543.3 Q1760.5 1543.86 1762.98 1543.86 Q1766.98 1543.86 1769.32 1541.75 Q1771.66 1539.64 1771.66 1536.03 Q1771.66 1532.42 1769.32 1530.31 Q1766.98 1528.21 1762.98 1528.21 Q1761.1 1528.21 1759.23 1528.62 Q1757.37 1529.04 1755.43 1529.92 L1755.43 1512.56 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M1795.54 1515.64 Q1791.93 1515.64 1790.11 1519.2 Q1788.3 1522.75 1788.3 1529.87 Q1788.3 1536.98 1790.11 1540.55 Q1791.93 1544.09 1795.54 1544.09 Q1799.18 1544.09 1800.98 1540.55 Q1802.81 1536.98 1802.81 1529.87 Q1802.81 1522.75 1800.98 1519.2 Q1799.18 1515.64 1795.54 1515.64 M1795.54 1511.93 Q1801.35 1511.93 1804.41 1516.54 Q1807.49 1521.12 1807.49 1529.87 Q1807.49 1538.6 1804.41 1543.21 Q1801.35 1547.79 1795.54 1547.79 Q1789.73 1547.79 1786.66 1543.21 Q1783.6 1538.6 1783.6 1529.87 Q1783.6 1521.12 1786.66 1516.54 Q1789.73 1511.93 1795.54 1511.93 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M2244.44 1543.18 L2260.76 1543.18 L2260.76 1547.12 L2238.82 1547.12 L2238.82 1543.18 Q2241.48 1540.43 2246.06 1535.8 Q2250.67 1531.15 2251.85 1529.81 Q2254.1 1527.28 2254.97 1525.55 Q2255.88 1523.79 2255.88 1522.1 Q2255.88 1519.34 2253.93 1517.61 Q2252.01 1515.87 2248.91 1515.87 Q2246.71 1515.87 2244.26 1516.63 Q2241.83 1517.4 2239.05 1518.95 L2239.05 1514.23 Q2241.87 1513.09 2244.33 1512.51 Q2246.78 1511.93 2248.82 1511.93 Q2254.19 1511.93 2257.38 1514.62 Q2260.58 1517.31 2260.58 1521.8 Q2260.58 1523.93 2259.77 1525.85 Q2258.98 1527.74 2256.87 1530.34 Q2256.29 1531.01 2253.19 1534.23 Q2250.09 1537.42 2244.44 1543.18 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M2280.58 1515.64 Q2276.97 1515.64 2275.14 1519.2 Q2273.33 1522.75 2273.33 1529.87 Q2273.33 1536.98 2275.14 1540.55 Q2276.97 1544.09 2280.58 1544.09 Q2284.21 1544.09 2286.02 1540.55 Q2287.85 1536.98 2287.85 1529.87 Q2287.85 1522.75 2286.02 1519.2 Q2284.21 1515.64 2280.58 1515.64 M2280.58 1511.93 Q2286.39 1511.93 2289.44 1516.54 Q2292.52 1521.12 2292.52 1529.87 Q2292.52 1538.6 2289.44 1543.21 Q2286.39 1547.79 2280.58 1547.79 Q2274.77 1547.79 2271.69 1543.21 Q2268.63 1538.6 2268.63 1529.87 Q2268.63 1521.12 2271.69 1516.54 Q2274.77 1511.93 2280.58 1511.93 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M2310.74 1515.64 Q2307.13 1515.64 2305.3 1519.2 Q2303.49 1522.75 2303.49 1529.87 Q2303.49 1536.98 2305.3 1540.55 Q2307.13 1544.09 2310.74 1544.09 Q2314.37 1544.09 2316.18 1540.55 Q2318.01 1536.98 2318.01 1529.87 Q2318.01 1522.75 2316.18 1519.2 Q2314.37 1515.64 2310.74 1515.64 M2310.74 1511.93 Q2316.55 1511.93 2319.6 1516.54 Q2322.68 1521.12 2322.68 1529.87 Q2322.68 1538.6 2319.6 1543.21 Q2316.55 1547.79 2310.74 1547.79 Q2304.93 1547.79 2301.85 1543.21 Q2298.79 1538.6 2298.79 1529.87 Q2298.79 1521.12 2301.85 1516.54 Q2304.93 1511.93 2310.74 1511.93 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip732)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,1448.38 2352.76,1448.38 
  "/>
<polyline clip-path="url(#clip732)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,1182.15 2352.76,1182.15 
  "/>
<polyline clip-path="url(#clip732)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,915.931 2352.76,915.931 
  "/>
<polyline clip-path="url(#clip732)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,649.708 2352.76,649.708 
  "/>
<polyline clip-path="url(#clip732)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,383.484 2352.76,383.484 
  "/>
<polyline clip-path="url(#clip732)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,117.261 2352.76,117.261 
  "/>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,1486.45 172.015,47.2441 
  "/>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,1448.38 190.912,1448.38 
  "/>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,1182.15 190.912,1182.15 
  "/>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,915.931 190.912,915.931 
  "/>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,649.708 190.912,649.708 
  "/>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,383.484 190.912,383.484 
  "/>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,117.261 190.912,117.261 
  "/>
<path clip-path="url(#clip730)" d="M124.07 1434.18 Q120.459 1434.18 118.631 1437.74 Q116.825 1441.28 116.825 1448.41 Q116.825 1455.52 118.631 1459.08 Q120.459 1462.63 124.07 1462.63 Q127.705 1462.63 129.51 1459.08 Q131.339 1455.52 131.339 1448.41 Q131.339 1441.28 129.51 1437.74 Q127.705 1434.18 124.07 1434.18 M124.07 1430.47 Q129.881 1430.47 132.936 1435.08 Q136.015 1439.66 136.015 1448.41 Q136.015 1457.14 132.936 1461.75 Q129.881 1466.33 124.07 1466.33 Q118.26 1466.33 115.182 1461.75 Q112.126 1457.14 112.126 1448.41 Q112.126 1439.66 115.182 1435.08 Q118.26 1430.47 124.07 1430.47 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M54.5569 1195.5 L62.1958 1195.5 L62.1958 1169.13 L53.8856 1170.8 L53.8856 1166.54 L62.1495 1164.87 L66.8254 1164.87 L66.8254 1195.5 L74.4642 1195.5 L74.4642 1199.43 L54.5569 1199.43 L54.5569 1195.5 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M93.9086 1167.95 Q90.2975 1167.95 88.4688 1171.52 Q86.6632 1175.06 86.6632 1182.19 Q86.6632 1189.3 88.4688 1192.86 Q90.2975 1196.4 93.9086 1196.4 Q97.5428 1196.4 99.3483 1192.86 Q101.177 1189.3 101.177 1182.19 Q101.177 1175.06 99.3483 1171.52 Q97.5428 1167.95 93.9086 1167.95 M93.9086 1164.25 Q99.7187 1164.25 102.774 1168.86 Q105.853 1173.44 105.853 1182.19 Q105.853 1190.92 102.774 1195.52 Q99.7187 1200.11 93.9086 1200.11 Q88.0984 1200.11 85.0197 1195.52 Q81.9642 1190.92 81.9642 1182.19 Q81.9642 1173.44 85.0197 1168.86 Q88.0984 1164.25 93.9086 1164.25 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M124.07 1167.95 Q120.459 1167.95 118.631 1171.52 Q116.825 1175.06 116.825 1182.19 Q116.825 1189.3 118.631 1192.86 Q120.459 1196.4 124.07 1196.4 Q127.705 1196.4 129.51 1192.86 Q131.339 1189.3 131.339 1182.19 Q131.339 1175.06 129.51 1171.52 Q127.705 1167.95 124.07 1167.95 M124.07 1164.25 Q129.881 1164.25 132.936 1168.86 Q136.015 1173.44 136.015 1182.19 Q136.015 1190.92 132.936 1195.52 Q129.881 1200.11 124.07 1200.11 Q118.26 1200.11 115.182 1195.52 Q112.126 1190.92 112.126 1182.19 Q112.126 1173.44 115.182 1168.86 Q118.26 1164.25 124.07 1164.25 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M57.7745 929.276 L74.0939 929.276 L74.0939 933.211 L52.1495 933.211 L52.1495 929.276 Q54.8115 926.521 59.3949 921.892 Q64.0013 917.239 65.1819 915.896 Q67.4272 913.373 68.3068 911.637 Q69.2096 909.878 69.2096 908.188 Q69.2096 905.433 67.2652 903.697 Q65.3439 901.961 62.2421 901.961 Q60.043 901.961 57.5893 902.725 Q55.1588 903.489 52.381 905.04 L52.381 900.318 Q55.2051 899.184 57.6588 898.605 Q60.1124 898.026 62.1495 898.026 Q67.5198 898.026 70.7142 900.711 Q73.9087 903.396 73.9087 907.887 Q73.9087 910.017 73.0985 911.938 Q72.3115 913.836 70.205 916.429 Q69.6263 917.1 66.5245 920.318 Q63.4226 923.512 57.7745 929.276 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M93.9086 901.73 Q90.2975 901.73 88.4688 905.295 Q86.6632 908.836 86.6632 915.966 Q86.6632 923.072 88.4688 926.637 Q90.2975 930.179 93.9086 930.179 Q97.5428 930.179 99.3483 926.637 Q101.177 923.072 101.177 915.966 Q101.177 908.836 99.3483 905.295 Q97.5428 901.73 93.9086 901.73 M93.9086 898.026 Q99.7187 898.026 102.774 902.633 Q105.853 907.216 105.853 915.966 Q105.853 924.693 102.774 929.299 Q99.7187 933.882 93.9086 933.882 Q88.0984 933.882 85.0197 929.299 Q81.9642 924.693 81.9642 915.966 Q81.9642 907.216 85.0197 902.633 Q88.0984 898.026 93.9086 898.026 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M124.07 901.73 Q120.459 901.73 118.631 905.295 Q116.825 908.836 116.825 915.966 Q116.825 923.072 118.631 926.637 Q120.459 930.179 124.07 930.179 Q127.705 930.179 129.51 926.637 Q131.339 923.072 131.339 915.966 Q131.339 908.836 129.51 905.295 Q127.705 901.73 124.07 901.73 M124.07 898.026 Q129.881 898.026 132.936 902.633 Q136.015 907.216 136.015 915.966 Q136.015 924.693 132.936 929.299 Q129.881 933.882 124.07 933.882 Q118.26 933.882 115.182 929.299 Q112.126 924.693 112.126 915.966 Q112.126 907.216 115.182 902.633 Q118.26 898.026 124.07 898.026 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M67.9133 648.354 Q71.2698 649.071 73.1448 651.34 Q75.0429 653.608 75.0429 656.941 Q75.0429 662.057 71.5244 664.858 Q68.0059 667.659 61.5245 667.659 Q59.3486 667.659 57.0338 667.219 Q54.7421 666.802 52.2884 665.946 L52.2884 661.432 Q54.2328 662.566 56.5477 663.145 Q58.8625 663.724 61.3856 663.724 Q65.7837 663.724 68.0754 661.988 Q70.3902 660.252 70.3902 656.941 Q70.3902 653.886 68.2374 652.173 Q66.1078 650.437 62.2884 650.437 L58.2606 650.437 L58.2606 646.594 L62.4735 646.594 Q65.9226 646.594 67.7513 645.229 Q69.58 643.84 69.58 641.247 Q69.58 638.585 67.6819 637.173 Q65.8069 635.738 62.2884 635.738 Q60.3671 635.738 58.168 636.155 Q55.969 636.571 53.3301 637.451 L53.3301 633.284 Q55.9921 632.543 58.3069 632.173 Q60.6449 631.803 62.705 631.803 Q68.0291 631.803 71.1309 634.233 Q74.2327 636.641 74.2327 640.761 Q74.2327 643.631 72.5892 645.622 Q70.9457 647.59 67.9133 648.354 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M93.9086 635.506 Q90.2975 635.506 88.4688 639.071 Q86.6632 642.613 86.6632 649.742 Q86.6632 656.849 88.4688 660.414 Q90.2975 663.955 93.9086 663.955 Q97.5428 663.955 99.3483 660.414 Q101.177 656.849 101.177 649.742 Q101.177 642.613 99.3483 639.071 Q97.5428 635.506 93.9086 635.506 M93.9086 631.803 Q99.7187 631.803 102.774 636.409 Q105.853 640.992 105.853 649.742 Q105.853 658.469 102.774 663.076 Q99.7187 667.659 93.9086 667.659 Q88.0984 667.659 85.0197 663.076 Q81.9642 658.469 81.9642 649.742 Q81.9642 640.992 85.0197 636.409 Q88.0984 631.803 93.9086 631.803 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M124.07 635.506 Q120.459 635.506 118.631 639.071 Q116.825 642.613 116.825 649.742 Q116.825 656.849 118.631 660.414 Q120.459 663.955 124.07 663.955 Q127.705 663.955 129.51 660.414 Q131.339 656.849 131.339 649.742 Q131.339 642.613 129.51 639.071 Q127.705 635.506 124.07 635.506 M124.07 631.803 Q129.881 631.803 132.936 636.409 Q136.015 640.992 136.015 649.742 Q136.015 658.469 132.936 663.076 Q129.881 667.659 124.07 667.659 Q118.26 667.659 115.182 663.076 Q112.126 658.469 112.126 649.742 Q112.126 640.992 115.182 636.409 Q118.26 631.803 124.07 631.803 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M66.5939 370.278 L54.7884 388.727 L66.5939 388.727 L66.5939 370.278 M65.367 366.204 L71.2466 366.204 L71.2466 388.727 L76.1772 388.727 L76.1772 392.616 L71.2466 392.616 L71.2466 400.764 L66.5939 400.764 L66.5939 392.616 L50.9921 392.616 L50.9921 388.102 L65.367 366.204 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M93.9086 369.283 Q90.2975 369.283 88.4688 372.848 Q86.6632 376.389 86.6632 383.519 Q86.6632 390.625 88.4688 394.19 Q90.2975 397.732 93.9086 397.732 Q97.5428 397.732 99.3483 394.19 Q101.177 390.625 101.177 383.519 Q101.177 376.389 99.3483 372.848 Q97.5428 369.283 93.9086 369.283 M93.9086 365.579 Q99.7187 365.579 102.774 370.186 Q105.853 374.769 105.853 383.519 Q105.853 392.246 102.774 396.852 Q99.7187 401.436 93.9086 401.436 Q88.0984 401.436 85.0197 396.852 Q81.9642 392.246 81.9642 383.519 Q81.9642 374.769 85.0197 370.186 Q88.0984 365.579 93.9086 365.579 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M124.07 369.283 Q120.459 369.283 118.631 372.848 Q116.825 376.389 116.825 383.519 Q116.825 390.625 118.631 394.19 Q120.459 397.732 124.07 397.732 Q127.705 397.732 129.51 394.19 Q131.339 390.625 131.339 383.519 Q131.339 376.389 129.51 372.848 Q127.705 369.283 124.07 369.283 M124.07 365.579 Q129.881 365.579 132.936 370.186 Q136.015 374.769 136.015 383.519 Q136.015 392.246 132.936 396.852 Q129.881 401.436 124.07 401.436 Q118.26 401.436 115.182 396.852 Q112.126 392.246 112.126 383.519 Q112.126 374.769 115.182 370.186 Q118.26 365.579 124.07 365.579 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M53.793 99.9809 L72.1494 99.9809 L72.1494 103.916 L58.0754 103.916 L58.0754 112.388 Q59.0939 112.041 60.1124 111.879 Q61.131 111.694 62.1495 111.694 Q67.9365 111.694 71.3161 114.865 Q74.6957 118.036 74.6957 123.453 Q74.6957 129.032 71.2235 132.133 Q67.7513 135.212 61.4319 135.212 Q59.256 135.212 56.9875 134.842 Q54.7421 134.471 52.3347 133.731 L52.3347 129.032 Q54.418 130.166 56.6402 130.721 Q58.8625 131.277 61.3393 131.277 Q65.3439 131.277 67.6819 129.171 Q70.0198 127.064 70.0198 123.453 Q70.0198 119.842 67.6819 117.735 Q65.3439 115.629 61.3393 115.629 Q59.4643 115.629 57.5893 116.046 Q55.7375 116.462 53.793 117.342 L53.793 99.9809 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M93.9086 103.06 Q90.2975 103.06 88.4688 106.624 Q86.6632 110.166 86.6632 117.296 Q86.6632 124.402 88.4688 127.967 Q90.2975 131.508 93.9086 131.508 Q97.5428 131.508 99.3483 127.967 Q101.177 124.402 101.177 117.296 Q101.177 110.166 99.3483 106.624 Q97.5428 103.06 93.9086 103.06 M93.9086 99.3559 Q99.7187 99.3559 102.774 103.962 Q105.853 108.546 105.853 117.296 Q105.853 126.022 102.774 130.629 Q99.7187 135.212 93.9086 135.212 Q88.0984 135.212 85.0197 130.629 Q81.9642 126.022 81.9642 117.296 Q81.9642 108.546 85.0197 103.962 Q88.0984 99.3559 93.9086 99.3559 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M124.07 103.06 Q120.459 103.06 118.631 106.624 Q116.825 110.166 116.825 117.296 Q116.825 124.402 118.631 127.967 Q120.459 131.508 124.07 131.508 Q127.705 131.508 129.51 127.967 Q131.339 124.402 131.339 117.296 Q131.339 110.166 129.51 106.624 Q127.705 103.06 124.07 103.06 M124.07 99.3559 Q129.881 99.3559 132.936 103.962 Q136.015 108.546 136.015 117.296 Q136.015 126.022 132.936 130.629 Q129.881 135.212 124.07 135.212 Q118.26 135.212 115.182 130.629 Q112.126 126.022 112.126 117.296 Q112.126 108.546 115.182 103.962 Q118.26 99.3559 124.07 99.3559 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip732)" style="stroke:#009af9; stroke-linecap:butt; stroke-linejoin:round; stroke-width:8; stroke-opacity:1; fill:none" points="
  233.734,1427.08 244.02,1427.08 254.307,1427.08 264.593,1427.08 274.88,1427.08 285.166,1427.08 295.453,1427.08 305.74,1427.08 316.026,1427.08 326.313,1427.08 
  336.599,1427.08 346.886,1427.08 357.172,1427.08 367.459,1427.08 377.745,1427.08 388.032,1424.42 398.318,1424.42 408.605,1419.09 418.891,1419.09 429.178,1419.09 
  439.464,1419.09 449.751,1419.09 460.037,1419.09 470.324,1419.09 480.61,1416.43 490.897,1424.42 501.183,1424.42 511.47,1424.42 521.756,1424.42 532.043,1424.42 
  542.329,1427.08 552.616,1427.08 562.902,1427.08 573.189,1427.08 583.475,1427.08 593.762,1427.08 604.048,1429.74 614.335,1429.74 624.621,1429.74 634.908,1429.74 
  645.194,1432.4 655.481,1435.07 665.768,1435.07 676.054,1440.39 686.341,1440.39 696.627,1440.39 706.914,1440.39 717.2,1440.39 727.487,1440.39 737.773,1443.05 
  748.06,1445.72 
  "/>
<polyline clip-path="url(#clip732)" style="stroke:#e26f46; stroke-linecap:butt; stroke-linejoin:round; stroke-width:8; stroke-opacity:1; fill:none" points="
  233.734,117.261 244.02,287.644 254.307,532.569 264.593,788.144 274.88,982.487 285.166,1139.56 295.453,1243.39 305.74,1325.92 316.026,1363.19 326.313,1387.15 
  336.599,1403.12 346.886,1408.44 357.172,1411.11 367.459,1411.11 377.745,1413.77 388.032,1413.77 398.318,1413.77 408.605,1413.77 418.891,1413.77 429.178,1246.05 
  439.464,1001.12 449.751,745.548 460.037,551.205 470.324,394.133 480.61,290.306 490.897,207.777 501.183,170.506 511.47,146.545 521.756,130.572 532.043,125.248 
  542.329,122.585 552.616,122.585 562.902,119.923 573.189,119.923 583.475,119.923 593.762,119.923 604.048,119.923 614.335,117.261 624.621,117.261 634.908,117.261 
  645.194,117.261 655.481,117.261 665.768,117.261 676.054,117.261 686.341,117.261 696.627,117.261 706.914,117.261 717.2,117.261 727.487,117.261 737.773,117.261 
  748.06,117.261 758.346,117.261 768.633,117.261 778.919,117.261 789.206,117.261 799.492,117.261 809.779,117.261 820.065,117.261 830.352,117.261 840.638,117.261 
  850.925,117.261 861.211,117.261 871.498,117.261 881.784,117.261 892.071,117.261 902.357,117.261 912.644,117.261 922.93,117.261 933.217,117.261 943.503,117.261 
  953.79,117.261 964.076,117.261 974.363,117.261 984.649,117.261 994.936,117.261 1005.22,117.261 1015.51,117.261 1025.8,117.261 1036.08,117.261 1046.37,117.261 
  1056.66,117.261 1066.94,117.261 1077.23,117.261 1087.51,117.261 1097.8,117.261 1108.09,117.261 1118.37,117.261 1128.66,117.261 1138.95,117.261 1149.23,117.261 
  1159.52,117.261 1169.81,117.261 1180.09,117.261 1190.38,117.261 1200.67,117.261 1210.95,117.261 1221.24,117.261 1231.53,117.261 1241.81,117.261 1252.1,117.261 
  1262.39,117.261 1272.67,117.261 1282.96,117.261 1293.24,117.261 1303.53,117.261 1313.82,117.261 1324.1,117.261 1334.39,117.261 1344.68,117.261 1354.96,117.261 
  1365.25,117.261 1375.54,117.261 1385.82,117.261 1396.11,117.261 1406.4,117.261 1416.68,117.261 1426.97,117.261 1437.26,117.261 1447.54,117.261 1457.83,117.261 
  1468.12,117.261 1478.4,117.261 1488.69,117.261 1498.98,117.261 1509.26,117.261 1519.55,117.261 1529.83,117.261 1540.12,117.261 1550.41,117.261 1560.69,117.261 
  1570.98,117.261 1581.27,117.261 1591.55,117.261 1601.84,117.261 1612.13,117.261 1622.41,117.261 1632.7,117.261 1642.99,117.261 1653.27,117.261 1663.56,117.261 
  1673.85,117.261 1684.13,117.261 1694.42,117.261 1704.71,117.261 1714.99,117.261 1725.28,117.261 1735.57,117.261 1745.85,117.261 1756.14,117.261 1766.42,117.261 
  1776.71,117.261 1787,117.261 1797.28,117.261 1807.57,117.261 1817.86,117.261 1828.14,117.261 1838.43,117.261 1848.72,117.261 1859,117.261 1869.29,117.261 
  1879.58,117.261 1889.86,117.261 1900.15,117.261 1910.44,117.261 1920.72,117.261 1931.01,117.261 1941.3,117.261 1951.58,117.261 1961.87,117.261 1972.15,117.261 
  1982.44,117.261 1992.73,117.261 2003.01,117.261 2013.3,117.261 2023.59,117.261 2033.87,117.261 2044.16,117.261 2054.45,117.261 2064.73,117.261 2075.02,117.261 
  2085.31,117.261 2095.59,117.261 2105.88,117.261 2116.17,117.261 2126.45,117.261 2136.74,117.261 2147.03,117.261 2157.31,117.261 2167.6,117.261 2177.89,117.261 
  2188.17,117.261 2198.46,117.261 2208.74,117.261 2219.03,117.261 2229.32,117.261 2239.6,117.261 2249.89,117.261 2260.18,117.261 2270.46,117.261 2280.75,117.261 
  2291.04,117.261 
  "/>
<polyline clip-path="url(#clip732)" style="stroke:#3da44d; stroke-linecap:butt; stroke-linejoin:round; stroke-width:8; stroke-opacity:1; fill:none" points="
  233.734,1182.15 244.02,963.851 254.307,641.721 264.593,351.537 274.88,90.6385 285.166,87.9763 295.453,146.545 305.74,269.008 316.026,439.391 326.313,625.748 
  336.599,814.766 346.886,969.176 357.172,1128.91 367.459,1224.75 377.745,1304.62 388.032,1355.2 398.318,1381.82 408.605,1408.44 418.891,1427.08 429.178,1437.73 
  439.464,1440.39 
  "/>
<path clip-path="url(#clip730)" d="
M1894.91 302.578 L2280.06 302.578 L2280.06 95.2176 L1894.91 95.2176  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1894.91,302.578 2280.06,302.578 2280.06,95.2176 1894.91,95.2176 1894.91,302.578 
  "/>
<polyline clip-path="url(#clip730)" style="stroke:#009af9; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1919.14,147.058 2064.53,147.058 
  "/>
<path clip-path="url(#clip730)" d="M2088.76 129.778 L2093.48 129.778 L2100.75 158.99 L2107.99 129.778 L2113.25 129.778 L2120.52 158.99 L2127.76 129.778 L2132.51 129.778 L2123.83 164.338 L2117.95 164.338 L2110.66 134.338 L2103.29 164.338 L2097.41 164.338 L2088.76 129.778 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M2145.79 141.398 Q2142.37 141.398 2140.38 144.083 Q2138.39 146.745 2138.39 151.398 Q2138.39 156.051 2140.35 158.736 Q2142.34 161.398 2145.79 161.398 Q2149.2 161.398 2151.19 158.713 Q2153.18 156.027 2153.18 151.398 Q2153.18 146.791 2151.19 144.106 Q2149.2 141.398 2145.79 141.398 M2145.79 137.787 Q2151.35 137.787 2154.52 141.398 Q2157.69 145.009 2157.69 151.398 Q2157.69 157.764 2154.52 161.398 Q2151.35 165.009 2145.79 165.009 Q2140.22 165.009 2137.04 161.398 Q2133.9 157.764 2133.9 151.398 Q2133.9 145.009 2137.04 141.398 Q2140.22 137.787 2145.79 137.787 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M2164.75 128.319 L2169.01 128.319 L2169.01 164.338 L2164.75 164.338 L2164.75 128.319 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M2191.05 128.319 L2191.05 131.861 L2186.97 131.861 Q2184.68 131.861 2183.78 132.787 Q2182.9 133.713 2182.9 136.12 L2182.9 138.412 L2189.91 138.412 L2189.91 141.722 L2182.9 141.722 L2182.9 164.338 L2178.62 164.338 L2178.62 141.722 L2174.54 141.722 L2174.54 138.412 L2178.62 138.412 L2178.62 136.606 Q2178.62 132.278 2180.63 130.31 Q2182.65 128.319 2187.02 128.319 L2191.05 128.319 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip730)" style="stroke:#e26f46; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1919.14,198.898 2064.53,198.898 
  "/>
<path clip-path="url(#clip730)" d="M2114.31 211.247 L2114.31 201.965 L2106.67 201.965 L2106.67 198.122 L2118.94 198.122 L2118.94 212.96 Q2116.23 214.881 2112.97 215.877 Q2109.71 216.849 2106 216.849 Q2097.9 216.849 2093.32 212.127 Q2088.76 207.381 2088.76 198.932 Q2088.76 190.46 2093.32 185.738 Q2097.9 180.993 2106 180.993 Q2109.38 180.993 2112.41 181.826 Q2115.47 182.659 2118.04 184.28 L2118.04 189.256 Q2115.45 187.057 2112.53 185.946 Q2109.61 184.835 2106.4 184.835 Q2100.05 184.835 2096.86 188.377 Q2093.69 191.918 2093.69 198.932 Q2093.69 205.923 2096.86 209.465 Q2100.05 213.006 2106.4 213.006 Q2108.87 213.006 2110.82 212.59 Q2112.76 212.15 2114.31 211.247 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M2142.32 194.233 Q2141.6 193.817 2140.75 193.631 Q2139.91 193.423 2138.9 193.423 Q2135.28 193.423 2133.34 195.784 Q2131.42 198.122 2131.42 202.52 L2131.42 216.178 L2127.14 216.178 L2127.14 190.252 L2131.42 190.252 L2131.42 194.28 Q2132.76 191.918 2134.91 190.784 Q2137.07 189.627 2140.15 189.627 Q2140.59 189.627 2141.12 189.696 Q2141.65 189.743 2142.3 189.858 L2142.32 194.233 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M2158.57 203.145 Q2153.41 203.145 2151.42 204.326 Q2149.43 205.506 2149.43 208.354 Q2149.43 210.622 2150.91 211.965 Q2152.41 213.284 2154.98 213.284 Q2158.53 213.284 2160.65 210.784 Q2162.81 208.261 2162.81 204.094 L2162.81 203.145 L2158.57 203.145 M2167.07 201.386 L2167.07 216.178 L2162.81 216.178 L2162.81 212.242 Q2161.35 214.603 2159.17 215.738 Q2157 216.849 2153.85 216.849 Q2149.87 216.849 2147.51 214.627 Q2145.17 212.381 2145.17 208.631 Q2145.17 204.256 2148.09 202.034 Q2151.03 199.812 2156.84 199.812 L2162.81 199.812 L2162.81 199.395 Q2162.81 196.455 2160.86 194.858 Q2158.94 193.238 2155.45 193.238 Q2153.22 193.238 2151.12 193.77 Q2149.01 194.303 2147.07 195.367 L2147.07 191.432 Q2149.4 190.53 2151.6 190.09 Q2153.8 189.627 2155.89 189.627 Q2161.51 189.627 2164.29 192.543 Q2167.07 195.46 2167.07 201.386 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M2192.37 191.016 L2192.37 195.043 Q2190.56 194.117 2188.62 193.655 Q2186.67 193.192 2184.59 193.192 Q2181.42 193.192 2179.82 194.164 Q2178.25 195.136 2178.25 197.08 Q2178.25 198.562 2179.38 199.418 Q2180.52 200.252 2183.94 201.016 L2185.4 201.34 Q2189.94 202.312 2191.84 204.094 Q2193.76 205.854 2193.76 209.025 Q2193.76 212.636 2190.89 214.742 Q2188.04 216.849 2183.04 216.849 Q2180.96 216.849 2178.69 216.432 Q2176.44 216.039 2173.94 215.228 L2173.94 210.83 Q2176.3 212.057 2178.59 212.682 Q2180.89 213.284 2183.13 213.284 Q2186.14 213.284 2187.76 212.266 Q2189.38 211.224 2189.38 209.349 Q2189.38 207.613 2188.2 206.687 Q2187.04 205.761 2183.09 204.904 L2181.6 204.557 Q2177.65 203.724 2175.89 202.011 Q2174.13 200.275 2174.13 197.266 Q2174.13 193.608 2176.72 191.618 Q2179.31 189.627 2184.08 189.627 Q2186.44 189.627 2188.53 189.974 Q2190.61 190.321 2192.37 191.016 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M2217.07 191.016 L2217.07 195.043 Q2215.26 194.117 2213.32 193.655 Q2211.37 193.192 2209.29 193.192 Q2206.12 193.192 2204.52 194.164 Q2202.95 195.136 2202.95 197.08 Q2202.95 198.562 2204.08 199.418 Q2205.21 200.252 2208.64 201.016 L2210.1 201.34 Q2214.64 202.312 2216.53 204.094 Q2218.46 205.854 2218.46 209.025 Q2218.46 212.636 2215.59 214.742 Q2212.74 216.849 2207.74 216.849 Q2205.65 216.849 2203.39 216.432 Q2201.14 216.039 2198.64 215.228 L2198.64 210.83 Q2201 212.057 2203.29 212.682 Q2205.59 213.284 2207.83 213.284 Q2210.84 213.284 2212.46 212.266 Q2214.08 211.224 2214.08 209.349 Q2214.08 207.613 2212.9 206.687 Q2211.74 205.761 2207.78 204.904 L2206.3 204.557 Q2202.34 203.724 2200.59 202.011 Q2198.83 200.275 2198.83 197.266 Q2198.83 193.608 2201.42 191.618 Q2204.01 189.627 2208.78 189.627 Q2211.14 189.627 2213.22 189.974 Q2215.31 190.321 2217.07 191.016 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip730)" style="stroke:#3da44d; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1919.14,250.738 2064.53,250.738 
  "/>
<path clip-path="url(#clip730)" d="M2111 234.592 L2111 239.152 Q2108.34 237.879 2105.98 237.254 Q2103.62 236.629 2101.42 236.629 Q2097.6 236.629 2095.52 238.11 Q2093.46 239.592 2093.46 242.323 Q2093.46 244.615 2094.82 245.795 Q2096.21 246.953 2100.05 247.67 L2102.88 248.249 Q2108.11 249.245 2110.59 251.768 Q2113.09 254.268 2113.09 258.481 Q2113.09 263.504 2109.71 266.096 Q2106.35 268.689 2099.85 268.689 Q2097.39 268.689 2094.61 268.133 Q2091.86 267.578 2088.9 266.49 L2088.9 261.675 Q2091.74 263.272 2094.47 264.082 Q2097.21 264.893 2099.85 264.893 Q2103.85 264.893 2106.03 263.319 Q2108.2 261.744 2108.2 258.828 Q2108.2 256.282 2106.63 254.846 Q2105.08 253.411 2101.51 252.694 L2098.66 252.138 Q2093.43 251.096 2091.1 248.874 Q2088.76 246.652 2088.76 242.694 Q2088.76 238.11 2091.97 235.471 Q2095.22 232.833 2100.89 232.833 Q2103.32 232.833 2105.84 233.272 Q2108.36 233.712 2111 234.592 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M2141.74 252.369 L2141.74 268.018 L2137.48 268.018 L2137.48 252.508 Q2137.48 248.828 2136.05 246.999 Q2134.61 245.17 2131.74 245.17 Q2128.29 245.17 2126.3 247.37 Q2124.31 249.569 2124.31 253.365 L2124.31 268.018 L2120.03 268.018 L2120.03 231.999 L2124.31 231.999 L2124.31 246.12 Q2125.84 243.782 2127.9 242.624 Q2129.98 241.467 2132.69 241.467 Q2137.16 241.467 2139.45 244.245 Q2141.74 246.999 2141.74 252.369 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M2172.41 253.99 L2172.41 256.073 L2152.83 256.073 Q2153.11 260.471 2155.47 262.786 Q2157.85 265.078 2162.09 265.078 Q2164.54 265.078 2166.84 264.476 Q2169.15 263.874 2171.42 262.67 L2171.42 266.698 Q2169.13 267.67 2166.72 268.18 Q2164.31 268.689 2161.84 268.689 Q2155.63 268.689 2152 265.078 Q2148.39 261.467 2148.39 255.309 Q2148.39 248.944 2151.81 245.217 Q2155.26 241.467 2161.09 241.467 Q2166.33 241.467 2169.36 244.846 Q2172.41 248.203 2172.41 253.99 M2168.15 252.74 Q2168.11 249.245 2166.19 247.161 Q2164.29 245.078 2161.14 245.078 Q2157.58 245.078 2155.42 247.092 Q2153.29 249.106 2152.97 252.763 L2168.15 252.74 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M2201.58 253.99 L2201.58 256.073 L2182 256.073 Q2182.28 260.471 2184.64 262.786 Q2187.02 265.078 2191.26 265.078 Q2193.71 265.078 2196 264.476 Q2198.32 263.874 2200.59 262.67 L2200.59 266.698 Q2198.29 267.67 2195.89 268.18 Q2193.48 268.689 2191 268.689 Q2184.8 268.689 2181.16 265.078 Q2177.55 261.467 2177.55 255.309 Q2177.55 248.944 2180.98 245.217 Q2184.43 241.467 2190.26 241.467 Q2195.49 241.467 2198.53 244.846 Q2201.58 248.203 2201.58 253.99 M2197.32 252.74 Q2197.28 249.245 2195.35 247.161 Q2193.46 245.078 2190.31 245.078 Q2186.74 245.078 2184.59 247.092 Q2182.46 249.106 2182.14 252.763 L2197.32 252.74 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip730)" d="M2212.69 264.129 L2212.69 277.879 L2208.41 277.879 L2208.41 242.092 L2212.69 242.092 L2212.69 246.027 Q2214.03 243.712 2216.07 242.601 Q2218.13 241.467 2220.98 241.467 Q2225.7 241.467 2228.64 245.217 Q2231.6 248.967 2231.6 255.078 Q2231.6 261.189 2228.64 264.939 Q2225.7 268.689 2220.98 268.689 Q2218.13 268.689 2216.07 267.578 Q2214.03 266.443 2212.69 264.129 M2227.18 255.078 Q2227.18 250.379 2225.24 247.717 Q2223.32 245.032 2219.94 245.032 Q2216.56 245.032 2214.61 247.717 Q2212.69 250.379 2212.69 255.078 Q2212.69 259.777 2214.61 262.462 Q2216.56 265.124 2219.94 265.124 Q2223.32 265.124 2225.24 262.462 Q2227.18 259.777 2227.18 255.078 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /></svg>
<h2 id="Female-and-Male-Sheep"><a class="docs-heading-anchor" href="#Female-and-Male-Sheep">Female &amp; Male Sheep</a><a id="Female-and-Male-Sheep-1"></a><a class="docs-heading-anchor-permalink" href="#Female-and-Male-Sheep" title="Permalink"></a></h2><p>The goal of the last part of the lab is to demonstrate the <a href="lecture_03/@ref forwarding_method">forwarding method</a> by implementing a sheep that can have two different sexes and can only reproduce with another sheep of opposite sex.</p><p>This new type of sheep needs an additonal field <code>sex::Symbol</code> which can be either <code>:male</code> or <code>:female</code>. In OOP we would now simply inherit from <code>Sheep</code> and create a <code>⚥Sheep</code> with an additional field. In Julia there is no inheritance - only subtyping of abstract types. As you cannot inherit from a concrete type in Julia, we will have to create a wrapper type and forward all necessary methods. This is typically a sign of unfortunate type tree design and should be avoided, but if you want to extend a code base by an unforeseen type this forwarding of methods is a nice work-around.  Our <code>⚥Sheep</code> type will simply contain a classic <code>sheep</code> and a <code>sex</code> field</p><pre><code class="language-julia hljs">struct ⚥Sheep{T&lt;:Real} &lt;: AbstractAnimal
    sheep::Sheep{T}
    sex::Symbol
end
⚥Sheep(E,ΔE,pr,pf,sex) = ⚥Sheep(Sheep(E,ΔE,pr,pf),sex)</code></pre><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; ⚥Sheep(1.0,1.0,1.0,1.0,:female)</code><code class="nohighlight hljs ansi" style="display:block;">⚥Sheep{Float64}(Sheep{Float64}(1.0, 1.0, 1.0, 1.0), :female)</code></pre><p>In our case, the methods that have to be forwarded are <code>agent_step!</code>, <code>reproduce!</code>, <code>eats</code> and <code>eat!</code>.  The custom reproduction behaviour will of course be taken care of by a <code>reproduce!</code> function that does not just forward but also contains specialized behaviour for the <code>⚥Sheep</code>.</p><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise</header>
<div class="admonition-body"><p>Forward the accessors <code>energy</code>, <code>energy!</code>, <code>reproduction_prob</code>, and <code>food_prob</code>, as well as our core methods <code>eats</code> and <code>eat!</code> to <code>Sheep</code>.</p></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><pre><code class="language-julia hljs">energy(g::⚥Sheep) = energy(g.sheep)
energy!(g::⚥Sheep, ΔE) = energy!(g.sheep, ΔE)
reproduction_prob(g::⚥Sheep) = reproduction_prob(g.sheep)
food_prob(g::⚥Sheep) = food_prob(g.sheep)

eats(::⚥Sheep, ::Grass) = true
eats(::⚥Sheep, ::PoisonedGrass) = true
eat!(s::⚥Sheep, g::AbstractPlant, w::World) = eat!(s.sheep, g, w)</code></pre></p></details><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise</header>
<div class="admonition-body"><p>Implement the <code>reproduce!</code> method for the <code>⚥Sheep</code>.  Note that you first have to find another sheep of opposite sex in your <code>World</code>, and only if you can find one you can reproduce.</p></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><pre><code class="language-julia hljs">mates(a::AbstractPlant, ::⚥Sheep) = false
mates(a::AbstractAnimal, ::⚥Sheep) = false
mates(g1::⚥Sheep, g2::⚥Sheep) = g1.sex != g2.sex
function find_mate(g::⚥Sheep, w::World)
    ms = filter(a-&gt;mates(a,g), w.agents)
    isempty(ms) ? nothing : sample(ms)
end

function reproduce!(s::⚥Sheep, w::World)
    m = find_mate(s,w)
    if !isnothing(m)
        energy!(s, energy(s)/2)
        # TODO: should probably mix s/m
        push!(w.agents, deepcopy(s))
    end
end</code></pre></p></details></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../lecture_02/hw/">« Homework</a><a class="docs-footer-nextpage" href="../hw/">Homework »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.6 on <span class="colophon-date" title="Thursday 23 September 2021 19:38">Thursday 23 September 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
