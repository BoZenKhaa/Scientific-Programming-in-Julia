<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Lab · Scientific Programming in Julia</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://JuliaTeachingCTU.github.io/Scientific-Programming-in-Julia/lecture_03/lab/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.svg" alt="Scientific Programming in Julia logo"/><img class="docs-dark-only" src="../../assets/logo-dark.svg" alt="Scientific Programming in Julia logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Scientific Programming in Julia</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../installation/">Installation</a></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">1: Introduction</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_01/motivation/">Motivation</a></li><li><a class="tocitem" href="../../lecture_01/outline/">Outline</a></li><li><a class="tocitem" href="../../lecture_01/lab/">Lab</a></li><li><a class="tocitem" href="../../lecture_01/hw/">Homework</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">2: The power of Type System &amp; multiple dispatch</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_02/lecture/">Lecture</a></li><li><a class="tocitem" href="../../lecture_02/lab/">Lab</a></li><li><a class="tocitem" href="../../lecture_02/hw/">Homework</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox" checked/><label class="tocitem" for="menuitem-5"><span class="docs-label">3: Design patterns</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Lab</a><ul class="internal"><li><a class="tocitem" href="#Reproduction"><span>Reproduction</span></a></li><li><a class="tocitem" href="#One-step-at-a-time"><span>One step at a time</span></a></li><li><a class="tocitem" href="#Simulate-the-world!"><span>Simulate the world!</span></a></li><li><a class="tocitem" href="#Female-and-Male-Sheep"><span>Female &amp; Male Sheep</span></a></li></ul></li><li><a class="tocitem" href="../hw/">Homework</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">4: Packages development, environments, etc...</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_04/lab/">Lab</a></li></ul></li><li><span class="tocitem">5: Benchmarking, profiling, and performance gotchas</span></li><li><span class="tocitem">6: Language introspection</span></li><li><input class="collapse-toggle" id="menuitem-9" type="checkbox"/><label class="tocitem" for="menuitem-9"><span class="docs-label">7: Macros</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_07/macros/">Macros</a></li></ul></li><li><span class="tocitem">8: Introduction to automatic differentiation</span></li><li><span class="tocitem">9: Manipulating intermediate representation</span></li><li><span class="tocitem">10: Different levels of parallel programming</span></li><li><span class="tocitem">11: Julia for GPU programming</span></li><li><span class="tocitem">12: Uncertainty propagation in ODE</span></li><li><span class="tocitem">13: Learning ODE from data</span></li><li><a class="tocitem" href="../../how_to_submit_hw/">How to submit homeworks</a></li><li><a class="tocitem" href="../../howto/">How To ...</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">3: Design patterns</a></li><li class="is-active"><a href>Lab</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Lab</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaTeachingCTU/Scientific-Programming-in-Julia/blob/master/docs/src/lecture_03/lab.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Lab-3:-Predator-Prey-Agents"><a class="docs-heading-anchor" href="#Lab-3:-Predator-Prey-Agents">Lab 3: Predator-Prey Agents</a><a id="Lab-3:-Predator-Prey-Agents-1"></a><a class="docs-heading-anchor-permalink" href="#Lab-3:-Predator-Prey-Agents" title="Permalink"></a></h1><p>In this lab we will finalize our predator-prey agent simulation such that we can simulate a number of steps and get a plot like below.</p><p><img src="../pred-prey.png" alt="img"/></p><h2 id="Reproduction"><a class="docs-heading-anchor" href="#Reproduction">Reproduction</a><a id="Reproduction-1"></a><a class="docs-heading-anchor-permalink" href="#Reproduction" title="Permalink"></a></h2><p>Currently our animals can only eat. In our simulation we also want them to reproduce. We will do this by adding a <code>reproduce!</code> method to <code>AbstractAnimal</code>.</p><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise</header>
<div class="admonition-body"><p>Write a function <code>reproduce!</code> that takes an <code>AbstractAnimal</code> and a <code>World</code>. Reproducing will cost an animal half of its energy and then add an identical copy of the given animal to the world.</p></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><pre><code class="language-julia hljs">function reproduce!(a::AbstractAnimal, w::World)
    energy!(a, energy(a)/2)
    push!(w.agents, deepcopy(a))
end</code></pre></p></details><h2 id="One-step-at-a-time"><a class="docs-heading-anchor" href="#One-step-at-a-time">One step at a time</a><a id="One-step-at-a-time-1"></a><a class="docs-heading-anchor-permalink" href="#One-step-at-a-time" title="Permalink"></a></h2><p>One iteration of our simulation will be carried out by a function called <code>agent_step!(::AbstractAgent, ::World)</code>. Implement one method for <code>AbstractPlant</code>s and one for <code>AbstractAnimal</code>s.</p><p>An <code>AbstractPlant</code> will grow if it is not fully grown (i.e. decrease growth counter).  If the growth counter has reached zero, the <code>fully_grown</code> flag has to be set to <code>true</code> and the counter reset to <code>regrowth_time</code>.</p><p>An <code>AbstractAnimal</code> will loose one unit of energy in every step.  Then it will try to find food and eat. After eating, if its energy is less than zero, the animal dies.  If it is still alive, it will try to reproduce with the probablitiy <span>$p_r$</span>.</p><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise</header>
<div class="admonition-body"><p>Implement the function <code>agent_step!</code> with specialized methods for <code>AbstractAnimal</code>s and <code>AbstractPlant</code>s.</p></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><pre><code class="language-julia hljs">function agent_step!(a::AbstractPlant, w::World)
    if !fully_grown(a)
        if countdown(a) &lt;= 0
            fully_grown!(a,true)
            reset!(a)
        else
            incr_countdown!(a,-1)
        end
    end
    return a
end

function agent_step!(a::AbstractAnimal, w::World)
    incr_energy!(a,-1)
    dinner = find_food(a,w)
    eat!(a, dinner, w)
    if energy(a) &lt; 0
        kill_agent!(a,w)
        return
    end
    if rand() &lt;= reproduction_prob(a)
        reproduce!(a,w)
    end
    return a
end</code></pre></p></details><h2 id="Simulate-the-world!"><a class="docs-heading-anchor" href="#Simulate-the-world!">Simulate the world!</a><a id="Simulate-the-world!-1"></a><a class="docs-heading-anchor-permalink" href="#Simulate-the-world!" title="Permalink"></a></h2><p>The last function we need for our simulation just needs to run a number of steps. In practice we often want varying logging behaviour which we can implement nicely using <em>callbacks</em>.</p><p>An exemplary callback could just log the agent count at every step:</p><pre><code class="language-julia hljs">log_count(w::World) = @info agent_count(w)</code></pre><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise</header>
<div class="admonition-body"><p>Implement a function <code>simulate!(w::World, iters::Int; callbacks=[])</code> which runs a number of iterations (i.e. <code>agent_step!</code>s) and applies passed callbacks of the form <code>callback(::World)</code> after each iteration.</p></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><pre><code class="language-julia hljs">function simulate!(w::World, iters::Int; callbacks=[])
    for i in 1:iters
        for a in w.agents
            agent_step!(a,w)
        end
        for cb in callbacks
            cb(w)
        end
    end
end</code></pre></p></details><p>Now lets try to run our first fully fledged simulation!  Below you can find some parameters that will often result in nice oscillations like in the plot at the beginning of the lab.</p><pre><code class="language-julia hljs">n_grass       = 500
regrowth_time = 17.0

n_sheep         = 100
Δenergy_sheep   = 5.0
sheep_reproduce = 0.5
sheep_foodprob  = 0.4

n_wolves       = 8
Δenergy_wolf   = 17.0
wolf_reproduce = 0.03
wolf_foodprob  = 0.02

gs = [Grass(true,regrowth_time,regrowth_time) for _ in 1:n_grass]
ss = [Sheep(2*Δenergy_sheep,Δenergy_sheep,sheep_reproduce, sheep_foodprob) for _ in 1:n_sheep]
ws = [Wolf(2*Δenergy_wolf,Δenergy_wolf,wolf_reproduce, wolf_foodprob) for _ in 1:n_wolves]

w = World(vcat(gs,ss,ws))

# construct a global variable to store agent counts at every step
counts = Dict(n=&gt;[c] for (n,c) in agent_count(w))
# callback to save current counts
function save_agent_count(w::World)
    for (n,c) in agent_count(w)
        push!(counts[n],c)
    end
end

cbs = [
    w-&gt;(@info agent_count(w)),
    save_agent_count
]

simulate!(w, 200, callbacks=cbs)

# plot the count trajectories for every type of agent
using Plots
plt = plot()
for (n,c) in counts
    plot!(plt, c, label=&quot;$n&quot;, lw=2)
end
plt</code></pre><?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewBox="0 0 2400 1600">
<defs>
  <clipPath id="clip070">
    <rect x="0" y="0" width="2400" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip070)" d="
M0 1600 L2400 1600 L2400 0 L0 0  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip071">
    <rect x="480" y="0" width="1681" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip070)" d="
M172.015 1486.45 L2352.76 1486.45 L2352.76 47.2441 L172.015 47.2441  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip072">
    <rect x="172" y="47" width="2182" height="1440"/>
  </clipPath>
</defs>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  223.447,1486.45 223.447,47.2441 
  "/>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  737.773,1486.45 737.773,47.2441 
  "/>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1252.1,1486.45 1252.1,47.2441 
  "/>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1766.42,1486.45 1766.42,47.2441 
  "/>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  2280.75,1486.45 2280.75,47.2441 
  "/>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,1486.45 2352.76,1486.45 
  "/>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  223.447,1486.45 223.447,1467.55 
  "/>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  737.773,1486.45 737.773,1467.55 
  "/>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1252.1,1486.45 1252.1,1467.55 
  "/>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1766.42,1486.45 1766.42,1467.55 
  "/>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  2280.75,1486.45 2280.75,1467.55 
  "/>
<path clip-path="url(#clip070)" d="M223.447 1515.64 Q219.836 1515.64 218.008 1519.2 Q216.202 1522.75 216.202 1529.87 Q216.202 1536.98 218.008 1540.55 Q219.836 1544.09 223.447 1544.09 Q227.082 1544.09 228.887 1540.55 Q230.716 1536.98 230.716 1529.87 Q230.716 1522.75 228.887 1519.2 Q227.082 1515.64 223.447 1515.64 M223.447 1511.93 Q229.258 1511.93 232.313 1516.54 Q235.392 1521.12 235.392 1529.87 Q235.392 1538.6 232.313 1543.21 Q229.258 1547.79 223.447 1547.79 Q217.637 1547.79 214.559 1543.21 Q211.503 1538.6 211.503 1529.87 Q211.503 1521.12 214.559 1516.54 Q217.637 1511.93 223.447 1511.93 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M712.472 1512.56 L730.829 1512.56 L730.829 1516.5 L716.755 1516.5 L716.755 1524.97 Q717.773 1524.62 718.792 1524.46 Q719.81 1524.27 720.829 1524.27 Q726.616 1524.27 729.995 1527.44 Q733.375 1530.62 733.375 1536.03 Q733.375 1541.61 729.903 1544.71 Q726.431 1547.79 720.111 1547.79 Q717.935 1547.79 715.667 1547.42 Q713.421 1547.05 711.014 1546.31 L711.014 1541.61 Q713.097 1542.74 715.32 1543.3 Q717.542 1543.86 720.019 1543.86 Q724.023 1543.86 726.361 1541.75 Q728.699 1539.64 728.699 1536.03 Q728.699 1532.42 726.361 1530.31 Q724.023 1528.21 720.019 1528.21 Q718.144 1528.21 716.269 1528.62 Q714.417 1529.04 712.472 1529.92 L712.472 1512.56 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M752.588 1515.64 Q748.977 1515.64 747.148 1519.2 Q745.343 1522.75 745.343 1529.87 Q745.343 1536.98 747.148 1540.55 Q748.977 1544.09 752.588 1544.09 Q756.222 1544.09 758.028 1540.55 Q759.856 1536.98 759.856 1529.87 Q759.856 1522.75 758.028 1519.2 Q756.222 1515.64 752.588 1515.64 M752.588 1511.93 Q758.398 1511.93 761.454 1516.54 Q764.532 1521.12 764.532 1529.87 Q764.532 1538.6 761.454 1543.21 Q758.398 1547.79 752.588 1547.79 Q746.778 1547.79 743.699 1543.21 Q740.643 1538.6 740.643 1529.87 Q740.643 1521.12 743.699 1516.54 Q746.778 1511.93 752.588 1511.93 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M1211.71 1543.18 L1219.34 1543.18 L1219.34 1516.82 L1211.03 1518.49 L1211.03 1514.23 L1219.3 1512.56 L1223.97 1512.56 L1223.97 1543.18 L1231.61 1543.18 L1231.61 1547.12 L1211.71 1547.12 L1211.71 1543.18 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M1251.06 1515.64 Q1247.45 1515.64 1245.62 1519.2 Q1243.81 1522.75 1243.81 1529.87 Q1243.81 1536.98 1245.62 1540.55 Q1247.45 1544.09 1251.06 1544.09 Q1254.69 1544.09 1256.5 1540.55 Q1258.33 1536.98 1258.33 1529.87 Q1258.33 1522.75 1256.5 1519.2 Q1254.69 1515.64 1251.06 1515.64 M1251.06 1511.93 Q1256.87 1511.93 1259.92 1516.54 Q1263 1521.12 1263 1529.87 Q1263 1538.6 1259.92 1543.21 Q1256.87 1547.79 1251.06 1547.79 Q1245.25 1547.79 1242.17 1543.21 Q1239.11 1538.6 1239.11 1529.87 Q1239.11 1521.12 1242.17 1516.54 Q1245.25 1511.93 1251.06 1511.93 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M1281.22 1515.64 Q1277.61 1515.64 1275.78 1519.2 Q1273.97 1522.75 1273.97 1529.87 Q1273.97 1536.98 1275.78 1540.55 Q1277.61 1544.09 1281.22 1544.09 Q1284.85 1544.09 1286.66 1540.55 Q1288.49 1536.98 1288.49 1529.87 Q1288.49 1522.75 1286.66 1519.2 Q1284.85 1515.64 1281.22 1515.64 M1281.22 1511.93 Q1287.03 1511.93 1290.08 1516.54 Q1293.16 1521.12 1293.16 1529.87 Q1293.16 1538.6 1290.08 1543.21 Q1287.03 1547.79 1281.22 1547.79 Q1275.41 1547.79 1272.33 1543.21 Q1269.27 1538.6 1269.27 1529.87 Q1269.27 1521.12 1272.33 1516.54 Q1275.41 1511.93 1281.22 1511.93 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M1726.03 1543.18 L1733.67 1543.18 L1733.67 1516.82 L1725.36 1518.49 L1725.36 1514.23 L1733.62 1512.56 L1738.3 1512.56 L1738.3 1543.18 L1745.94 1543.18 L1745.94 1547.12 L1726.03 1547.12 L1726.03 1543.18 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M1755.43 1512.56 L1773.79 1512.56 L1773.79 1516.5 L1759.71 1516.5 L1759.71 1524.97 Q1760.73 1524.62 1761.75 1524.46 Q1762.77 1524.27 1763.79 1524.27 Q1769.57 1524.27 1772.95 1527.44 Q1776.33 1530.62 1776.33 1536.03 Q1776.33 1541.61 1772.86 1544.71 Q1769.39 1547.79 1763.07 1547.79 Q1760.89 1547.79 1758.62 1547.42 Q1756.38 1547.05 1753.97 1546.31 L1753.97 1541.61 Q1756.05 1542.74 1758.28 1543.3 Q1760.5 1543.86 1762.98 1543.86 Q1766.98 1543.86 1769.32 1541.75 Q1771.66 1539.64 1771.66 1536.03 Q1771.66 1532.42 1769.32 1530.31 Q1766.98 1528.21 1762.98 1528.21 Q1761.1 1528.21 1759.23 1528.62 Q1757.37 1529.04 1755.43 1529.92 L1755.43 1512.56 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M1795.54 1515.64 Q1791.93 1515.64 1790.11 1519.2 Q1788.3 1522.75 1788.3 1529.87 Q1788.3 1536.98 1790.11 1540.55 Q1791.93 1544.09 1795.54 1544.09 Q1799.18 1544.09 1800.98 1540.55 Q1802.81 1536.98 1802.81 1529.87 Q1802.81 1522.75 1800.98 1519.2 Q1799.18 1515.64 1795.54 1515.64 M1795.54 1511.93 Q1801.35 1511.93 1804.41 1516.54 Q1807.49 1521.12 1807.49 1529.87 Q1807.49 1538.6 1804.41 1543.21 Q1801.35 1547.79 1795.54 1547.79 Q1789.73 1547.79 1786.66 1543.21 Q1783.6 1538.6 1783.6 1529.87 Q1783.6 1521.12 1786.66 1516.54 Q1789.73 1511.93 1795.54 1511.93 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M2244.44 1543.18 L2260.76 1543.18 L2260.76 1547.12 L2238.82 1547.12 L2238.82 1543.18 Q2241.48 1540.43 2246.06 1535.8 Q2250.67 1531.15 2251.85 1529.81 Q2254.1 1527.28 2254.97 1525.55 Q2255.88 1523.79 2255.88 1522.1 Q2255.88 1519.34 2253.93 1517.61 Q2252.01 1515.87 2248.91 1515.87 Q2246.71 1515.87 2244.26 1516.63 Q2241.83 1517.4 2239.05 1518.95 L2239.05 1514.23 Q2241.87 1513.09 2244.33 1512.51 Q2246.78 1511.93 2248.82 1511.93 Q2254.19 1511.93 2257.38 1514.62 Q2260.58 1517.31 2260.58 1521.8 Q2260.58 1523.93 2259.77 1525.85 Q2258.98 1527.74 2256.87 1530.34 Q2256.29 1531.01 2253.19 1534.23 Q2250.09 1537.42 2244.44 1543.18 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M2280.58 1515.64 Q2276.97 1515.64 2275.14 1519.2 Q2273.33 1522.75 2273.33 1529.87 Q2273.33 1536.98 2275.14 1540.55 Q2276.97 1544.09 2280.58 1544.09 Q2284.21 1544.09 2286.02 1540.55 Q2287.85 1536.98 2287.85 1529.87 Q2287.85 1522.75 2286.02 1519.2 Q2284.21 1515.64 2280.58 1515.64 M2280.58 1511.93 Q2286.39 1511.93 2289.44 1516.54 Q2292.52 1521.12 2292.52 1529.87 Q2292.52 1538.6 2289.44 1543.21 Q2286.39 1547.79 2280.58 1547.79 Q2274.77 1547.79 2271.69 1543.21 Q2268.63 1538.6 2268.63 1529.87 Q2268.63 1521.12 2271.69 1516.54 Q2274.77 1511.93 2280.58 1511.93 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M2310.74 1515.64 Q2307.13 1515.64 2305.3 1519.2 Q2303.49 1522.75 2303.49 1529.87 Q2303.49 1536.98 2305.3 1540.55 Q2307.13 1544.09 2310.74 1544.09 Q2314.37 1544.09 2316.18 1540.55 Q2318.01 1536.98 2318.01 1529.87 Q2318.01 1522.75 2316.18 1519.2 Q2314.37 1515.64 2310.74 1515.64 M2310.74 1511.93 Q2316.55 1511.93 2319.6 1516.54 Q2322.68 1521.12 2322.68 1529.87 Q2322.68 1538.6 2319.6 1543.21 Q2316.55 1547.79 2310.74 1547.79 Q2304.93 1547.79 2301.85 1543.21 Q2298.79 1538.6 2298.79 1529.87 Q2298.79 1521.12 2301.85 1516.54 Q2304.93 1511.93 2310.74 1511.93 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,1448.14 2352.76,1448.14 
  "/>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,1205.69 2352.76,1205.69 
  "/>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,963.233 2352.76,963.233 
  "/>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,720.78 2352.76,720.78 
  "/>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,478.326 2352.76,478.326 
  "/>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,235.873 2352.76,235.873 
  "/>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,1486.45 172.015,47.2441 
  "/>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,1448.14 190.912,1448.14 
  "/>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,1205.69 190.912,1205.69 
  "/>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,963.233 190.912,963.233 
  "/>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,720.78 190.912,720.78 
  "/>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,478.326 190.912,478.326 
  "/>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,235.873 190.912,235.873 
  "/>
<path clip-path="url(#clip070)" d="M124.07 1433.94 Q120.459 1433.94 118.631 1437.5 Q116.825 1441.05 116.825 1448.17 Q116.825 1455.28 118.631 1458.85 Q120.459 1462.39 124.07 1462.39 Q127.705 1462.39 129.51 1458.85 Q131.339 1455.28 131.339 1448.17 Q131.339 1441.05 129.51 1437.5 Q127.705 1433.94 124.07 1433.94 M124.07 1430.24 Q129.881 1430.24 132.936 1434.84 Q136.015 1439.42 136.015 1448.17 Q136.015 1456.9 132.936 1461.51 Q129.881 1466.09 124.07 1466.09 Q118.26 1466.09 115.182 1461.51 Q112.126 1456.9 112.126 1448.17 Q112.126 1439.42 115.182 1434.84 Q118.26 1430.24 124.07 1430.24 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M54.5569 1219.03 L62.1958 1219.03 L62.1958 1192.67 L53.8856 1194.33 L53.8856 1190.07 L62.1495 1188.41 L66.8254 1188.41 L66.8254 1219.03 L74.4642 1219.03 L74.4642 1222.97 L54.5569 1222.97 L54.5569 1219.03 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M93.9086 1191.49 Q90.2975 1191.49 88.4688 1195.05 Q86.6632 1198.59 86.6632 1205.72 Q86.6632 1212.83 88.4688 1216.39 Q90.2975 1219.93 93.9086 1219.93 Q97.5428 1219.93 99.3483 1216.39 Q101.177 1212.83 101.177 1205.72 Q101.177 1198.59 99.3483 1195.05 Q97.5428 1191.49 93.9086 1191.49 M93.9086 1187.78 Q99.7187 1187.78 102.774 1192.39 Q105.853 1196.97 105.853 1205.72 Q105.853 1214.45 102.774 1219.05 Q99.7187 1223.64 93.9086 1223.64 Q88.0984 1223.64 85.0197 1219.05 Q81.9642 1214.45 81.9642 1205.72 Q81.9642 1196.97 85.0197 1192.39 Q88.0984 1187.78 93.9086 1187.78 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M124.07 1191.49 Q120.459 1191.49 118.631 1195.05 Q116.825 1198.59 116.825 1205.72 Q116.825 1212.83 118.631 1216.39 Q120.459 1219.93 124.07 1219.93 Q127.705 1219.93 129.51 1216.39 Q131.339 1212.83 131.339 1205.72 Q131.339 1198.59 129.51 1195.05 Q127.705 1191.49 124.07 1191.49 M124.07 1187.78 Q129.881 1187.78 132.936 1192.39 Q136.015 1196.97 136.015 1205.72 Q136.015 1214.45 132.936 1219.05 Q129.881 1223.64 124.07 1223.64 Q118.26 1223.64 115.182 1219.05 Q112.126 1214.45 112.126 1205.72 Q112.126 1196.97 115.182 1192.39 Q118.26 1187.78 124.07 1187.78 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M57.7745 976.578 L74.0939 976.578 L74.0939 980.513 L52.1495 980.513 L52.1495 976.578 Q54.8115 973.824 59.3949 969.194 Q64.0013 964.541 65.1819 963.199 Q67.4272 960.675 68.3068 958.939 Q69.2096 957.18 69.2096 955.49 Q69.2096 952.736 67.2652 951 Q65.3439 949.263 62.2421 949.263 Q60.043 949.263 57.5893 950.027 Q55.1588 950.791 52.381 952.342 L52.381 947.62 Q55.2051 946.486 57.6588 945.907 Q60.1124 945.328 62.1495 945.328 Q67.5198 945.328 70.7142 948.013 Q73.9087 950.699 73.9087 955.189 Q73.9087 957.319 73.0985 959.24 Q72.3115 961.138 70.205 963.731 Q69.6263 964.402 66.5245 967.62 Q63.4226 970.814 57.7745 976.578 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M93.9086 949.032 Q90.2975 949.032 88.4688 952.597 Q86.6632 956.138 86.6632 963.268 Q86.6632 970.374 88.4688 973.939 Q90.2975 977.481 93.9086 977.481 Q97.5428 977.481 99.3483 973.939 Q101.177 970.374 101.177 963.268 Q101.177 956.138 99.3483 952.597 Q97.5428 949.032 93.9086 949.032 M93.9086 945.328 Q99.7187 945.328 102.774 949.935 Q105.853 954.518 105.853 963.268 Q105.853 971.995 102.774 976.601 Q99.7187 981.185 93.9086 981.185 Q88.0984 981.185 85.0197 976.601 Q81.9642 971.995 81.9642 963.268 Q81.9642 954.518 85.0197 949.935 Q88.0984 945.328 93.9086 945.328 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M124.07 949.032 Q120.459 949.032 118.631 952.597 Q116.825 956.138 116.825 963.268 Q116.825 970.374 118.631 973.939 Q120.459 977.481 124.07 977.481 Q127.705 977.481 129.51 973.939 Q131.339 970.374 131.339 963.268 Q131.339 956.138 129.51 952.597 Q127.705 949.032 124.07 949.032 M124.07 945.328 Q129.881 945.328 132.936 949.935 Q136.015 954.518 136.015 963.268 Q136.015 971.995 132.936 976.601 Q129.881 981.185 124.07 981.185 Q118.26 981.185 115.182 976.601 Q112.126 971.995 112.126 963.268 Q112.126 954.518 115.182 949.935 Q118.26 945.328 124.07 945.328 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M67.9133 719.426 Q71.2698 720.143 73.1448 722.412 Q75.0429 724.68 75.0429 728.014 Q75.0429 733.129 71.5244 735.93 Q68.0059 738.731 61.5245 738.731 Q59.3486 738.731 57.0338 738.291 Q54.7421 737.875 52.2884 737.018 L52.2884 732.504 Q54.2328 733.639 56.5477 734.217 Q58.8625 734.796 61.3856 734.796 Q65.7837 734.796 68.0754 733.06 Q70.3902 731.324 70.3902 728.014 Q70.3902 724.958 68.2374 723.245 Q66.1078 721.509 62.2884 721.509 L58.2606 721.509 L58.2606 717.666 L62.4735 717.666 Q65.9226 717.666 67.7513 716.301 Q69.58 714.912 69.58 712.319 Q69.58 709.657 67.6819 708.245 Q65.8069 706.81 62.2884 706.81 Q60.3671 706.81 58.168 707.227 Q55.969 707.643 53.3301 708.523 L53.3301 704.356 Q55.9921 703.616 58.3069 703.245 Q60.6449 702.875 62.705 702.875 Q68.0291 702.875 71.1309 705.305 Q74.2327 707.713 74.2327 711.833 Q74.2327 714.703 72.5892 716.694 Q70.9457 718.662 67.9133 719.426 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M93.9086 706.579 Q90.2975 706.579 88.4688 710.143 Q86.6632 713.685 86.6632 720.815 Q86.6632 727.921 88.4688 731.486 Q90.2975 735.027 93.9086 735.027 Q97.5428 735.027 99.3483 731.486 Q101.177 727.921 101.177 720.815 Q101.177 713.685 99.3483 710.143 Q97.5428 706.579 93.9086 706.579 M93.9086 702.875 Q99.7187 702.875 102.774 707.481 Q105.853 712.065 105.853 720.815 Q105.853 729.541 102.774 734.148 Q99.7187 738.731 93.9086 738.731 Q88.0984 738.731 85.0197 734.148 Q81.9642 729.541 81.9642 720.815 Q81.9642 712.065 85.0197 707.481 Q88.0984 702.875 93.9086 702.875 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M124.07 706.579 Q120.459 706.579 118.631 710.143 Q116.825 713.685 116.825 720.815 Q116.825 727.921 118.631 731.486 Q120.459 735.027 124.07 735.027 Q127.705 735.027 129.51 731.486 Q131.339 727.921 131.339 720.815 Q131.339 713.685 129.51 710.143 Q127.705 706.579 124.07 706.579 M124.07 702.875 Q129.881 702.875 132.936 707.481 Q136.015 712.065 136.015 720.815 Q136.015 729.541 132.936 734.148 Q129.881 738.731 124.07 738.731 Q118.26 738.731 115.182 734.148 Q112.126 729.541 112.126 720.815 Q112.126 712.065 115.182 707.481 Q118.26 702.875 124.07 702.875 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M66.5939 465.12 L54.7884 483.569 L66.5939 483.569 L66.5939 465.12 M65.367 461.046 L71.2466 461.046 L71.2466 483.569 L76.1772 483.569 L76.1772 487.458 L71.2466 487.458 L71.2466 495.606 L66.5939 495.606 L66.5939 487.458 L50.9921 487.458 L50.9921 482.944 L65.367 461.046 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M93.9086 464.125 Q90.2975 464.125 88.4688 467.69 Q86.6632 471.231 86.6632 478.361 Q86.6632 485.468 88.4688 489.032 Q90.2975 492.574 93.9086 492.574 Q97.5428 492.574 99.3483 489.032 Q101.177 485.468 101.177 478.361 Q101.177 471.231 99.3483 467.69 Q97.5428 464.125 93.9086 464.125 M93.9086 460.421 Q99.7187 460.421 102.774 465.028 Q105.853 469.611 105.853 478.361 Q105.853 487.088 102.774 491.694 Q99.7187 496.278 93.9086 496.278 Q88.0984 496.278 85.0197 491.694 Q81.9642 487.088 81.9642 478.361 Q81.9642 469.611 85.0197 465.028 Q88.0984 460.421 93.9086 460.421 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M124.07 464.125 Q120.459 464.125 118.631 467.69 Q116.825 471.231 116.825 478.361 Q116.825 485.468 118.631 489.032 Q120.459 492.574 124.07 492.574 Q127.705 492.574 129.51 489.032 Q131.339 485.468 131.339 478.361 Q131.339 471.231 129.51 467.69 Q127.705 464.125 124.07 464.125 M124.07 460.421 Q129.881 460.421 132.936 465.028 Q136.015 469.611 136.015 478.361 Q136.015 487.088 132.936 491.694 Q129.881 496.278 124.07 496.278 Q118.26 496.278 115.182 491.694 Q112.126 487.088 112.126 478.361 Q112.126 469.611 115.182 465.028 Q118.26 460.421 124.07 460.421 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M53.793 218.593 L72.1494 218.593 L72.1494 222.528 L58.0754 222.528 L58.0754 231 Q59.0939 230.653 60.1124 230.491 Q61.131 230.306 62.1495 230.306 Q67.9365 230.306 71.3161 233.477 Q74.6957 236.648 74.6957 242.065 Q74.6957 247.644 71.2235 250.745 Q67.7513 253.824 61.4319 253.824 Q59.256 253.824 56.9875 253.454 Q54.7421 253.083 52.3347 252.343 L52.3347 247.644 Q54.418 248.778 56.6402 249.333 Q58.8625 249.889 61.3393 249.889 Q65.3439 249.889 67.6819 247.783 Q70.0198 245.676 70.0198 242.065 Q70.0198 238.454 67.6819 236.347 Q65.3439 234.241 61.3393 234.241 Q59.4643 234.241 57.5893 234.658 Q55.7375 235.074 53.793 235.954 L53.793 218.593 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M93.9086 221.672 Q90.2975 221.672 88.4688 225.236 Q86.6632 228.778 86.6632 235.908 Q86.6632 243.014 88.4688 246.579 Q90.2975 250.121 93.9086 250.121 Q97.5428 250.121 99.3483 246.579 Q101.177 243.014 101.177 235.908 Q101.177 228.778 99.3483 225.236 Q97.5428 221.672 93.9086 221.672 M93.9086 217.968 Q99.7187 217.968 102.774 222.574 Q105.853 227.158 105.853 235.908 Q105.853 244.634 102.774 249.241 Q99.7187 253.824 93.9086 253.824 Q88.0984 253.824 85.0197 249.241 Q81.9642 244.634 81.9642 235.908 Q81.9642 227.158 85.0197 222.574 Q88.0984 217.968 93.9086 217.968 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M124.07 221.672 Q120.459 221.672 118.631 225.236 Q116.825 228.778 116.825 235.908 Q116.825 243.014 118.631 246.579 Q120.459 250.121 124.07 250.121 Q127.705 250.121 129.51 246.579 Q131.339 243.014 131.339 235.908 Q131.339 228.778 129.51 225.236 Q127.705 221.672 124.07 221.672 M124.07 217.968 Q129.881 217.968 132.936 222.574 Q136.015 227.158 136.015 235.908 Q136.015 244.634 132.936 249.241 Q129.881 253.824 124.07 253.824 Q118.26 253.824 115.182 249.241 Q112.126 244.634 112.126 235.908 Q112.126 227.158 115.182 222.574 Q118.26 217.968 124.07 217.968 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip072)" style="stroke:#009af9; stroke-linecap:butt; stroke-linejoin:round; stroke-width:8; stroke-opacity:1; fill:none" points="
  233.734,1428.74 244.02,1428.74 254.307,1428.74 264.593,1428.74 274.88,1428.74 285.166,1428.74 295.453,1428.74 305.74,1428.74 316.026,1428.74 326.313,1428.74 
  336.599,1428.74 346.886,1428.74 357.172,1428.74 367.459,1428.74 377.745,1426.32 388.032,1426.32 398.318,1426.32 408.605,1426.32 418.891,1426.32 429.178,1423.89 
  439.464,1423.89 449.751,1423.89 460.037,1423.89 470.324,1423.89 480.61,1423.89 490.897,1423.89 501.183,1416.62 511.47,1419.05 521.756,1421.47 532.043,1421.47 
  542.329,1419.05 552.616,1421.47 562.902,1423.89 573.189,1426.32 583.475,1431.17 593.762,1431.17 604.048,1433.59 614.335,1433.59 624.621,1433.59 634.908,1436.02 
  645.194,1436.02 655.481,1436.02 665.768,1436.02 676.054,1436.02 686.341,1436.02 696.627,1436.02 706.914,1436.02 717.2,1436.02 727.487,1436.02 737.773,1436.02 
  748.06,1438.44 758.346,1438.44 768.633,1440.87 778.919,1445.72 789.206,1445.72 
  "/>
<polyline clip-path="url(#clip072)" style="stroke:#e26f46; stroke-linecap:butt; stroke-linejoin:round; stroke-width:8; stroke-opacity:1; fill:none" points="
  233.734,235.873 244.02,422.562 254.307,669.865 264.593,888.073 274.88,1135.38 285.166,1225.08 295.453,1312.37 305.74,1346.31 316.026,1365.71 326.313,1370.56 
  336.599,1382.68 346.886,1394.8 357.172,1402.07 367.459,1402.07 377.745,1406.92 388.032,1406.92 398.318,1406.92 408.605,1406.92 418.891,1406.92 429.178,1220.23 
  439.464,972.931 449.751,754.723 460.037,507.421 470.324,417.713 480.61,330.43 490.897,296.486 501.183,277.09 511.47,272.241 521.756,260.118 532.043,247.996 
  542.329,240.722 552.616,240.722 562.902,235.873 573.189,235.873 583.475,235.873 593.762,235.873 604.048,235.873 614.335,235.873 624.621,235.873 634.908,235.873 
  645.194,235.873 655.481,235.873 665.768,235.873 676.054,235.873 686.341,235.873 696.627,235.873 706.914,235.873 717.2,235.873 727.487,235.873 737.773,235.873 
  748.06,235.873 758.346,235.873 768.633,235.873 778.919,235.873 789.206,235.873 799.492,235.873 809.779,235.873 820.065,235.873 830.352,235.873 840.638,235.873 
  850.925,235.873 861.211,235.873 871.498,235.873 881.784,235.873 892.071,235.873 902.357,235.873 912.644,235.873 922.93,235.873 933.217,235.873 943.503,235.873 
  953.79,235.873 964.076,235.873 974.363,235.873 984.649,235.873 994.936,235.873 1005.22,235.873 1015.51,235.873 1025.8,235.873 1036.08,235.873 1046.37,235.873 
  1056.66,235.873 1066.94,235.873 1077.23,235.873 1087.51,235.873 1097.8,235.873 1108.09,235.873 1118.37,235.873 1128.66,235.873 1138.95,235.873 1149.23,235.873 
  1159.52,235.873 1169.81,235.873 1180.09,235.873 1190.38,235.873 1200.67,235.873 1210.95,235.873 1221.24,235.873 1231.53,235.873 1241.81,235.873 1252.1,235.873 
  1262.39,235.873 1272.67,235.873 1282.96,235.873 1293.24,235.873 1303.53,235.873 1313.82,235.873 1324.1,235.873 1334.39,235.873 1344.68,235.873 1354.96,235.873 
  1365.25,235.873 1375.54,235.873 1385.82,235.873 1396.11,235.873 1406.4,235.873 1416.68,235.873 1426.97,235.873 1437.26,235.873 1447.54,235.873 1457.83,235.873 
  1468.12,235.873 1478.4,235.873 1488.69,235.873 1498.98,235.873 1509.26,235.873 1519.55,235.873 1529.83,235.873 1540.12,235.873 1550.41,235.873 1560.69,235.873 
  1570.98,235.873 1581.27,235.873 1591.55,235.873 1601.84,235.873 1612.13,235.873 1622.41,235.873 1632.7,235.873 1642.99,235.873 1653.27,235.873 1663.56,235.873 
  1673.85,235.873 1684.13,235.873 1694.42,235.873 1704.71,235.873 1714.99,235.873 1725.28,235.873 1735.57,235.873 1745.85,235.873 1756.14,235.873 1766.42,235.873 
  1776.71,235.873 1787,235.873 1797.28,235.873 1807.57,235.873 1817.86,235.873 1828.14,235.873 1838.43,235.873 1848.72,235.873 1859,235.873 1869.29,235.873 
  1879.58,235.873 1889.86,235.873 1900.15,235.873 1910.44,235.873 1920.72,235.873 1931.01,235.873 1941.3,235.873 1951.58,235.873 1961.87,235.873 1972.15,235.873 
  1982.44,235.873 1992.73,235.873 2003.01,235.873 2013.3,235.873 2023.59,235.873 2033.87,235.873 2044.16,235.873 2054.45,235.873 2064.73,235.873 2075.02,235.873 
  2085.31,235.873 2095.59,235.873 2105.88,235.873 2116.17,235.873 2126.45,235.873 2136.74,235.873 2147.03,235.873 2157.31,235.873 2167.6,235.873 2177.89,235.873 
  2188.17,235.873 2198.46,235.873 2208.74,235.873 2219.03,235.873 2229.32,235.873 2239.6,235.873 2249.89,235.873 2260.18,235.873 2270.46,235.873 2280.75,235.873 
  2291.04,235.873 
  "/>
<polyline clip-path="url(#clip072)" style="stroke:#3da44d; stroke-linecap:butt; stroke-linejoin:round; stroke-width:8; stroke-opacity:1; fill:none" points="
  233.734,1205.69 244.02,994.752 254.307,611.676 264.593,357.1 274.88,107.373 285.166,87.9763 295.453,146.165 305.74,366.798 316.026,614.1 326.313,827.459 
  336.599,968.082 346.886,1111.13 357.172,1198.41 367.459,1278.42 377.745,1322.06 388.032,1368.13 398.318,1399.65 408.605,1419.05 418.891,1423.89 429.178,1438.44 
  439.464,1443.29 449.751,1445.72 
  "/>
<path clip-path="url(#clip070)" d="
M1894.91 302.578 L2280.06 302.578 L2280.06 95.2176 L1894.91 95.2176  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1894.91,302.578 2280.06,302.578 2280.06,95.2176 1894.91,95.2176 1894.91,302.578 
  "/>
<polyline clip-path="url(#clip070)" style="stroke:#009af9; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1919.14,147.058 2064.53,147.058 
  "/>
<path clip-path="url(#clip070)" d="M2088.76 129.778 L2093.48 129.778 L2100.75 158.99 L2107.99 129.778 L2113.25 129.778 L2120.52 158.99 L2127.76 129.778 L2132.51 129.778 L2123.83 164.338 L2117.95 164.338 L2110.66 134.338 L2103.29 164.338 L2097.41 164.338 L2088.76 129.778 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M2145.79 141.398 Q2142.37 141.398 2140.38 144.083 Q2138.39 146.745 2138.39 151.398 Q2138.39 156.051 2140.35 158.736 Q2142.34 161.398 2145.79 161.398 Q2149.2 161.398 2151.19 158.713 Q2153.18 156.027 2153.18 151.398 Q2153.18 146.791 2151.19 144.106 Q2149.2 141.398 2145.79 141.398 M2145.79 137.787 Q2151.35 137.787 2154.52 141.398 Q2157.69 145.009 2157.69 151.398 Q2157.69 157.764 2154.52 161.398 Q2151.35 165.009 2145.79 165.009 Q2140.22 165.009 2137.04 161.398 Q2133.9 157.764 2133.9 151.398 Q2133.9 145.009 2137.04 141.398 Q2140.22 137.787 2145.79 137.787 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M2164.75 128.319 L2169.01 128.319 L2169.01 164.338 L2164.75 164.338 L2164.75 128.319 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M2191.05 128.319 L2191.05 131.861 L2186.97 131.861 Q2184.68 131.861 2183.78 132.787 Q2182.9 133.713 2182.9 136.12 L2182.9 138.412 L2189.91 138.412 L2189.91 141.722 L2182.9 141.722 L2182.9 164.338 L2178.62 164.338 L2178.62 141.722 L2174.54 141.722 L2174.54 138.412 L2178.62 138.412 L2178.62 136.606 Q2178.62 132.278 2180.63 130.31 Q2182.65 128.319 2187.02 128.319 L2191.05 128.319 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip070)" style="stroke:#e26f46; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1919.14,198.898 2064.53,198.898 
  "/>
<path clip-path="url(#clip070)" d="M2114.31 211.247 L2114.31 201.965 L2106.67 201.965 L2106.67 198.122 L2118.94 198.122 L2118.94 212.96 Q2116.23 214.881 2112.97 215.877 Q2109.71 216.849 2106 216.849 Q2097.9 216.849 2093.32 212.127 Q2088.76 207.381 2088.76 198.932 Q2088.76 190.46 2093.32 185.738 Q2097.9 180.993 2106 180.993 Q2109.38 180.993 2112.41 181.826 Q2115.47 182.659 2118.04 184.28 L2118.04 189.256 Q2115.45 187.057 2112.53 185.946 Q2109.61 184.835 2106.4 184.835 Q2100.05 184.835 2096.86 188.377 Q2093.69 191.918 2093.69 198.932 Q2093.69 205.923 2096.86 209.465 Q2100.05 213.006 2106.4 213.006 Q2108.87 213.006 2110.82 212.59 Q2112.76 212.15 2114.31 211.247 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M2142.32 194.233 Q2141.6 193.817 2140.75 193.631 Q2139.91 193.423 2138.9 193.423 Q2135.28 193.423 2133.34 195.784 Q2131.42 198.122 2131.42 202.52 L2131.42 216.178 L2127.14 216.178 L2127.14 190.252 L2131.42 190.252 L2131.42 194.28 Q2132.76 191.918 2134.91 190.784 Q2137.07 189.627 2140.15 189.627 Q2140.59 189.627 2141.12 189.696 Q2141.65 189.743 2142.3 189.858 L2142.32 194.233 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M2158.57 203.145 Q2153.41 203.145 2151.42 204.326 Q2149.43 205.506 2149.43 208.354 Q2149.43 210.622 2150.91 211.965 Q2152.41 213.284 2154.98 213.284 Q2158.53 213.284 2160.65 210.784 Q2162.81 208.261 2162.81 204.094 L2162.81 203.145 L2158.57 203.145 M2167.07 201.386 L2167.07 216.178 L2162.81 216.178 L2162.81 212.242 Q2161.35 214.603 2159.17 215.738 Q2157 216.849 2153.85 216.849 Q2149.87 216.849 2147.51 214.627 Q2145.17 212.381 2145.17 208.631 Q2145.17 204.256 2148.09 202.034 Q2151.03 199.812 2156.84 199.812 L2162.81 199.812 L2162.81 199.395 Q2162.81 196.455 2160.86 194.858 Q2158.94 193.238 2155.45 193.238 Q2153.22 193.238 2151.12 193.77 Q2149.01 194.303 2147.07 195.367 L2147.07 191.432 Q2149.4 190.53 2151.6 190.09 Q2153.8 189.627 2155.89 189.627 Q2161.51 189.627 2164.29 192.543 Q2167.07 195.46 2167.07 201.386 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M2192.37 191.016 L2192.37 195.043 Q2190.56 194.117 2188.62 193.655 Q2186.67 193.192 2184.59 193.192 Q2181.42 193.192 2179.82 194.164 Q2178.25 195.136 2178.25 197.08 Q2178.25 198.562 2179.38 199.418 Q2180.52 200.252 2183.94 201.016 L2185.4 201.34 Q2189.94 202.312 2191.84 204.094 Q2193.76 205.854 2193.76 209.025 Q2193.76 212.636 2190.89 214.742 Q2188.04 216.849 2183.04 216.849 Q2180.96 216.849 2178.69 216.432 Q2176.44 216.039 2173.94 215.228 L2173.94 210.83 Q2176.3 212.057 2178.59 212.682 Q2180.89 213.284 2183.13 213.284 Q2186.14 213.284 2187.76 212.266 Q2189.38 211.224 2189.38 209.349 Q2189.38 207.613 2188.2 206.687 Q2187.04 205.761 2183.09 204.904 L2181.6 204.557 Q2177.65 203.724 2175.89 202.011 Q2174.13 200.275 2174.13 197.266 Q2174.13 193.608 2176.72 191.618 Q2179.31 189.627 2184.08 189.627 Q2186.44 189.627 2188.53 189.974 Q2190.61 190.321 2192.37 191.016 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M2217.07 191.016 L2217.07 195.043 Q2215.26 194.117 2213.32 193.655 Q2211.37 193.192 2209.29 193.192 Q2206.12 193.192 2204.52 194.164 Q2202.95 195.136 2202.95 197.08 Q2202.95 198.562 2204.08 199.418 Q2205.21 200.252 2208.64 201.016 L2210.1 201.34 Q2214.64 202.312 2216.53 204.094 Q2218.46 205.854 2218.46 209.025 Q2218.46 212.636 2215.59 214.742 Q2212.74 216.849 2207.74 216.849 Q2205.65 216.849 2203.39 216.432 Q2201.14 216.039 2198.64 215.228 L2198.64 210.83 Q2201 212.057 2203.29 212.682 Q2205.59 213.284 2207.83 213.284 Q2210.84 213.284 2212.46 212.266 Q2214.08 211.224 2214.08 209.349 Q2214.08 207.613 2212.9 206.687 Q2211.74 205.761 2207.78 204.904 L2206.3 204.557 Q2202.34 203.724 2200.59 202.011 Q2198.83 200.275 2198.83 197.266 Q2198.83 193.608 2201.42 191.618 Q2204.01 189.627 2208.78 189.627 Q2211.14 189.627 2213.22 189.974 Q2215.31 190.321 2217.07 191.016 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip070)" style="stroke:#3da44d; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1919.14,250.738 2064.53,250.738 
  "/>
<path clip-path="url(#clip070)" d="M2111 234.592 L2111 239.152 Q2108.34 237.879 2105.98 237.254 Q2103.62 236.629 2101.42 236.629 Q2097.6 236.629 2095.52 238.11 Q2093.46 239.592 2093.46 242.323 Q2093.46 244.615 2094.82 245.795 Q2096.21 246.953 2100.05 247.67 L2102.88 248.249 Q2108.11 249.245 2110.59 251.768 Q2113.09 254.268 2113.09 258.481 Q2113.09 263.504 2109.71 266.096 Q2106.35 268.689 2099.85 268.689 Q2097.39 268.689 2094.61 268.133 Q2091.86 267.578 2088.9 266.49 L2088.9 261.675 Q2091.74 263.272 2094.47 264.082 Q2097.21 264.893 2099.85 264.893 Q2103.85 264.893 2106.03 263.319 Q2108.2 261.744 2108.2 258.828 Q2108.2 256.282 2106.63 254.846 Q2105.08 253.411 2101.51 252.694 L2098.66 252.138 Q2093.43 251.096 2091.1 248.874 Q2088.76 246.652 2088.76 242.694 Q2088.76 238.11 2091.97 235.471 Q2095.22 232.833 2100.89 232.833 Q2103.32 232.833 2105.84 233.272 Q2108.36 233.712 2111 234.592 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M2141.74 252.369 L2141.74 268.018 L2137.48 268.018 L2137.48 252.508 Q2137.48 248.828 2136.05 246.999 Q2134.61 245.17 2131.74 245.17 Q2128.29 245.17 2126.3 247.37 Q2124.31 249.569 2124.31 253.365 L2124.31 268.018 L2120.03 268.018 L2120.03 231.999 L2124.31 231.999 L2124.31 246.12 Q2125.84 243.782 2127.9 242.624 Q2129.98 241.467 2132.69 241.467 Q2137.16 241.467 2139.45 244.245 Q2141.74 246.999 2141.74 252.369 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M2172.41 253.99 L2172.41 256.073 L2152.83 256.073 Q2153.11 260.471 2155.47 262.786 Q2157.85 265.078 2162.09 265.078 Q2164.54 265.078 2166.84 264.476 Q2169.15 263.874 2171.42 262.67 L2171.42 266.698 Q2169.13 267.67 2166.72 268.18 Q2164.31 268.689 2161.84 268.689 Q2155.63 268.689 2152 265.078 Q2148.39 261.467 2148.39 255.309 Q2148.39 248.944 2151.81 245.217 Q2155.26 241.467 2161.09 241.467 Q2166.33 241.467 2169.36 244.846 Q2172.41 248.203 2172.41 253.99 M2168.15 252.74 Q2168.11 249.245 2166.19 247.161 Q2164.29 245.078 2161.14 245.078 Q2157.58 245.078 2155.42 247.092 Q2153.29 249.106 2152.97 252.763 L2168.15 252.74 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M2201.58 253.99 L2201.58 256.073 L2182 256.073 Q2182.28 260.471 2184.64 262.786 Q2187.02 265.078 2191.26 265.078 Q2193.71 265.078 2196 264.476 Q2198.32 263.874 2200.59 262.67 L2200.59 266.698 Q2198.29 267.67 2195.89 268.18 Q2193.48 268.689 2191 268.689 Q2184.8 268.689 2181.16 265.078 Q2177.55 261.467 2177.55 255.309 Q2177.55 248.944 2180.98 245.217 Q2184.43 241.467 2190.26 241.467 Q2195.49 241.467 2198.53 244.846 Q2201.58 248.203 2201.58 253.99 M2197.32 252.74 Q2197.28 249.245 2195.35 247.161 Q2193.46 245.078 2190.31 245.078 Q2186.74 245.078 2184.59 247.092 Q2182.46 249.106 2182.14 252.763 L2197.32 252.74 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip070)" d="M2212.69 264.129 L2212.69 277.879 L2208.41 277.879 L2208.41 242.092 L2212.69 242.092 L2212.69 246.027 Q2214.03 243.712 2216.07 242.601 Q2218.13 241.467 2220.98 241.467 Q2225.7 241.467 2228.64 245.217 Q2231.6 248.967 2231.6 255.078 Q2231.6 261.189 2228.64 264.939 Q2225.7 268.689 2220.98 268.689 Q2218.13 268.689 2216.07 267.578 Q2214.03 266.443 2212.69 264.129 M2227.18 255.078 Q2227.18 250.379 2225.24 247.717 Q2223.32 245.032 2219.94 245.032 Q2216.56 245.032 2214.61 247.717 Q2212.69 250.379 2212.69 255.078 Q2212.69 259.777 2214.61 262.462 Q2216.56 265.124 2219.94 265.124 Q2223.32 265.124 2225.24 262.462 Q2227.18 259.777 2227.18 255.078 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /></svg>
<h2 id="Female-and-Male-Sheep"><a class="docs-heading-anchor" href="#Female-and-Male-Sheep">Female &amp; Male Sheep</a><a id="Female-and-Male-Sheep-1"></a><a class="docs-heading-anchor-permalink" href="#Female-and-Male-Sheep" title="Permalink"></a></h2><p>The goal of the last part of the lab is to demonstrate the <a href="lecture_03/@ref forwarding_method">forwarding method</a> by implementing a sheep that can have two different sexes and can only reproduce with another sheep of opposite sex.</p><p>This new type of sheep needs an additonal field <code>sex::Symbol</code> which can be either <code>:male</code> or <code>:female</code>. In OOP we would now simply inherit from <code>Sheep</code> and create a <code>⚥Sheep</code> with an additional field. In Julia there is no inheritance - only subtyping of abstract types. As you cannot inherit from a concrete type in Julia, we will have to create a wrapper type and forward all necessary methods. This is typically a sign of unfortunate type tree design and should be avoided, but if you want to extend a code base by an unforeseen type this forwarding of methods is a nice work-around.  Our <code>⚥Sheep</code> type will simply contain a classic <code>sheep</code> and a <code>sex</code> field</p><pre><code class="language-julia hljs">struct ⚥Sheep{T&lt;:Real} &lt;: AbstractAnimal
    sheep::Sheep{T}
    sex::Symbol
end
⚥Sheep(E,ΔE,pr,pf,sex) = ⚥Sheep(Sheep(E,ΔE,pr,pf),sex)</code></pre><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; ⚥Sheep(1.0,1.0,1.0,1.0,:female)</code><code class="nohighlight hljs ansi" style="display:block;">⚥Sheep{Float64}(Sheep{Float64}(1.0, 1.0, 1.0, 1.0), :female)</code></pre><p>In our case, the methods that have to be forwarded are <code>agent_step!</code>, <code>reproduce!</code>, <code>eats</code> and <code>eat!</code>.  The custom reproduction behaviour will of course be taken care of by a <code>reproduce!</code> function that does not just forward but also contains specialized behaviour for the <code>⚥Sheep</code>.</p><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise</header>
<div class="admonition-body"><p>Forward the accessors <code>energy</code>, <code>energy!</code>, <code>reproduction_prob</code>, and <code>food_prob</code>, as well as our core methods <code>eats</code> and <code>eat!</code> to <code>Sheep</code>.</p></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><pre><code class="language-julia hljs">energy(g::⚥Sheep) = energy(g.sheep)
energy!(g::⚥Sheep, ΔE) = energy!(g.sheep, ΔE)
reproduction_prob(g::⚥Sheep) = reproduction_prob(g.sheep)
food_prob(g::⚥Sheep) = food_prob(g.sheep)

eats(::⚥Sheep, ::Grass) = true
eats(::⚥Sheep, ::PoisonedGrass) = true
eat!(s::⚥Sheep, g::AbstractPlant, w::World) = eat!(s.sheep, g, w)</code></pre></p></details><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise</header>
<div class="admonition-body"><p>Implement the <code>reproduce!</code> method for the <code>⚥Sheep</code>.  Note that you first have to find another sheep of opposite sex in your <code>World</code>, and only if you can find one you can reproduce.</p></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><pre><code class="language-julia hljs">mates(a::AbstractPlant, ::⚥Sheep) = false
mates(a::AbstractAnimal, ::⚥Sheep) = false
mates(g1::⚥Sheep, g2::⚥Sheep) = g1.sex != g2.sex
function find_mate(g::⚥Sheep, w::World)
    ms = filter(a-&gt;mates(a,g), w.agents)
    isempty(ms) ? nothing : sample(ms)
end

function reproduce!(s::⚥Sheep, w::World)
    m = find_mate(s,w)
    if !isnothing(m)
        energy!(s, energy(s)/2)
        # TODO: should probably mix s/m
        push!(w.agents, deepcopy(s))
    end
end</code></pre></p></details></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../lecture_02/hw/">« Homework</a><a class="docs-footer-nextpage" href="../hw/">Homework »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.6 on <span class="colophon-date" title="Monday 20 September 2021 07:05">Monday 20 September 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
